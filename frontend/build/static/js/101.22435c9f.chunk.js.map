{"version":3,"file":"static/js/101.22435c9f.chunk.js","mappings":"mKAEA,MA0DA,EA1DgBA,IAAiC,IAAhC,aAAEC,EAAY,SAAEC,GAAUF,EACvC,MAAMG,GAASC,EAAAA,EAAAA,QAAO,MAChBC,GAAiBD,EAAAA,EAAAA,QAAO,MACxBE,GAAaF,EAAAA,EAAAA,QAAO,CAAC,GACrBG,GAAgBH,EAAAA,EAAAA,QAAO,MASvBI,EAAgBA,CAACC,EAAKC,KACxB,MAAMC,EARWF,IACL,OAARA,QAAwBG,IAARH,EAA0B,UAC1CA,GAAO,GAAW,UAClBA,GAAO,IAAY,UACnBA,GAAO,IAAY,UAChB,UAGOI,CAAYJ,GACpBK,EAAW,iCAAiCH,kEAAsEI,KAAKC,MAAMP,IAAQ,kDAAkDC,UAC7L,OAAOO,OAAOC,EAAEC,QAAQ,CAAEC,KAAMN,EAAUO,UAAW,kBAAmBC,SAAU,CAAC,GAAI,IAAKC,WAAY,CAAC,GAAI,OAuCjH,OApCAC,EAAAA,EAAAA,WAAU,KACN,GAAIrB,EAAOsB,UAAYpB,EAAeoB,QAAS,CAC3C,MAAMC,EAAMT,OAAOC,EAAEQ,IAAIvB,EAAOsB,QAAS,CAAEE,aAAa,IAASC,QAAQ,CAAC,OAAQ,OAAS,IAC3FX,OAAOC,EAAEW,UAAU,sDAAsDC,MAAMJ,GAC/ET,OAAOC,EAAEa,QAAQC,KAAK,CAAEC,SAAU,YAAaH,MAAMJ,GACrDrB,EAAeoB,QAAUC,CAC7B,GACD,KAEHF,EAAAA,EAAAA,WAAU,KACN,MAAME,EAAMrB,EAAeoB,QACtBC,GAAQxB,IAEbgC,OAAOC,OAAO7B,EAAWmB,SAASW,QAAQC,GAAUA,EAAOC,UAC3DhC,EAAWmB,QAAU,CAAC,EAEtBS,OAAOK,QAAQrC,GAAUkC,QAAQI,IAAoB,IAAlBC,EAAIC,GAAQF,EAC3C,MAAM,IAAEG,EAAG,IAAEC,EAAG,KAAElC,GAASgC,EAAQG,aAC7BR,EAASpB,OAAOC,EAAEmB,OAAO,CAACM,EAAKC,GAAM,CAAEE,KAAMtC,EAAckC,EAAQK,kBAAmBrC,KAASoB,MAAMJ,GAC3GpB,EAAWmB,QAAQgB,GAAMJ,MAG9B,CAACnC,KAEJsB,EAAAA,EAAAA,WAAU,KACN,MAAME,EAAMrB,EAAeoB,QACvBC,GAAOzB,IACPyB,EAAIE,QAAQ,CAAC3B,EAAa0C,IAAK1C,EAAa2C,KAAM,IAC9CrC,EAAckB,QACdlB,EAAckB,QAAQuB,UAAU,CAAC/C,EAAa0C,IAAK1C,EAAa2C,MAEhErC,EAAckB,QAAUR,OAAOC,EAAEmB,OAAO,CAACpC,EAAa0C,IAAK1C,EAAa2C,MAAMd,MAAMJ,KAG7F,CAACzB,KAEGgD,EAAAA,EAAAA,KAAA,OAAKC,IAAK/C,EAAQgD,MAAO,CAAEC,OAAQ,OAAQC,MAAO,OAAQC,aAAc,U","sources":["components/LazyMap.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\n\r\nconst LazyMap = ({ userLocation, stations }) => {\r\n    const mapRef = useRef(null);\r\n    const mapInstanceRef = useRef(null);\r\n    const markersRef = useRef({});\r\n    const userMarkerRef = useRef(null);\r\n\r\n    const getAQIColor = (aqi) => {\r\n        if (aqi === null || aqi === undefined) return '#6b7280';\r\n        if (aqi <= 50) return '#10b981';\r\n        if (aqi <= 100) return '#f59e0b';\r\n        if (aqi <= 200) return '#ef4444';\r\n        return '#7c2d12';\r\n    };\r\n    const createAqiIcon = (aqi, name) => {\r\n        const color = getAQIColor(aqi);\r\n        const iconHtml = `<div style=\"background-color: ${color};\" class=\"aqi-marker-icon\"><div class=\"aqi-marker-icon-inner\">${Math.round(aqi) || 'N/A'}</div></div><div class=\"aqi-marker-label\">${name}</div>`;\r\n        return window.L.divIcon({ html: iconHtml, className: 'custom-div-icon', iconSize: [40, 40], iconAnchor: [20, 40] });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (mapRef.current && !mapInstanceRef.current) {\r\n            const map = window.L.map(mapRef.current, { zoomControl: false }).setView([10.176, 76.430], 13);\r\n            window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\r\n            window.L.control.zoom({ position: 'topleft' }).addTo(map);\r\n            mapInstanceRef.current = map;\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const map = mapInstanceRef.current;\r\n        if (!map || !stations) return;\r\n\r\n        Object.values(markersRef.current).forEach(marker => marker.remove());\r\n        markersRef.current = {};\r\n\r\n        Object.entries(stations).forEach(([id, station]) => {\r\n            const { lat, lng, name } = station.station_info;\r\n            const marker = window.L.marker([lat, lng], { icon: createAqiIcon(station.highest_sub_index, name) }).addTo(map);\r\n            markersRef.current[id] = marker;\r\n        });\r\n\r\n    }, [stations]);\r\n    \r\n    useEffect(() => {\r\n        const map = mapInstanceRef.current;\r\n        if (map && userLocation) {\r\n            map.setView([userLocation.lat, userLocation.lng], 14);\r\n            if (userMarkerRef.current) {\r\n                userMarkerRef.current.setLatLng([userLocation.lat, userLocation.lng]);\r\n            } else {\r\n                userMarkerRef.current = window.L.marker([userLocation.lat, userLocation.lng]).addTo(map);\r\n            }\r\n        }\r\n    }, [userLocation]);\r\n\r\n    return <div ref={mapRef} style={{ height: '100%', width: '100%', borderRadius: '12px' }}></div>;\r\n};\r\n\r\nexport default LazyMap;"],"names":["_ref","userLocation","stations","mapRef","useRef","mapInstanceRef","markersRef","userMarkerRef","createAqiIcon","aqi","name","color","undefined","getAQIColor","iconHtml","Math","round","window","L","divIcon","html","className","iconSize","iconAnchor","useEffect","current","map","zoomControl","setView","tileLayer","addTo","control","zoom","position","Object","values","forEach","marker","remove","entries","_ref2","id","station","lat","lng","station_info","icon","highest_sub_index","setLatLng","_jsx","ref","style","height","width","borderRadius"],"sourceRoot":""}