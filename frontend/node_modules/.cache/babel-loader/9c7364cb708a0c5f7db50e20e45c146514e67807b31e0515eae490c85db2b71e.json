{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arathy\\\\React_django\\\\my-django-react-app\\\\frontend\\\\src\\\\components\\\\MapPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Line } from 'react-chartjs-2';\nimport { useAuth } from '../App';\nimport './css/MapPage.css';\n\n// Helper function to get AQI color\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getAQIColor = aqi => {\n  if (aqi === null || aqi === undefined) return '#6b7280';\n  if (aqi <= 50) return '#10b981';\n  if (aqi <= 100) return '#f59e0b';\n  if (aqi <= 150) return '#ef4444';\n  if (aqi <= 200) return '#dc2626';\n  if (aqi <= 300) return '#7c2d12';\n  return '#4c1d95';\n};\n\n// Optimized Navbar Component\nconst MapNavbar = ({\n  user,\n  logout,\n  onMenuToggle,\n  isMenuOpen\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const handleLogout = React.useCallback(() => {\n    logout();\n    navigate('/');\n  }, [logout, navigate]);\n  const handleDashboardNavigation = React.useCallback(() => {\n    if (user) {\n      navigate('/dashboard');\n    } else {\n      navigate('/login');\n    }\n  }, [user, navigate]);\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"map-navbar\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-content\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"navbar-brand\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/aqi.webp\",\n          alt: \"AQM Logo\",\n          loading: \"lazy\",\n          width: \"32\",\n          height: \"32\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"AirAware\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu-toggle\",\n        onClick: onMenuToggle,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-bars\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: `nav-links ${isMenuOpen ? 'active' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            className: \"nav-link\",\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/map\",\n            className: \"nav-link active\",\n            children: \"Live Map\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleDashboardNavigation,\n              className: \"nav-link nav-button\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-chart-bar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 19\n              }, this), \" Dashboard\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"nav-link user-greeting\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-user-circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this), \" \", user.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleLogout,\n              className: \"nav-link logout-btn nav-button\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-sign-out-alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 19\n              }, this), \" Logout\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            className: \"nav-link login-btn\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-sign-in-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this), \" Login\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n\n// Enhanced Loading Component\n_s(MapNavbar, \"bQGKWOBhsKetIWq3IPM7a+S+1ZM=\", false, function () {\n  return [useNavigate];\n});\n_c = MapNavbar;\nconst MapLoadingOverlay = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"map-loading-overlay\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-spinner-enhanced\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-ring\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-ring\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-ring\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-text\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Loading Air Quality Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Fetching real-time monitoring stations...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-progress\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 86,\n  columnNumber: 3\n}, this);\n\n// Enhanced Error Component\n_c2 = MapLoadingOverlay;\nconst ErrorDisplay = ({\n  error,\n  onRetry\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"error-display\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"fas fa-exclamation-triangle error-icon\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Connection Error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onRetry,\n      className: \"retry-button\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), \" Retry\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 106,\n  columnNumber: 3\n}, this);\n\n// Main Component\n_c3 = ErrorDisplay;\nconst MapPage = () => {\n  _s2();\n  const [map, setMap] = React.useState(null);\n  const [stations, setStations] = React.useState({});\n  const [selectedStationId, setSelectedStationId] = React.useState('lora-v1');\n  const [isLoading, setIsLoading] = React.useState(true);\n  const [error, setError] = React.useState(null);\n  const [selectedParameter, setSelectedParameter] = React.useState('pm25');\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\n  const [retryCount, setRetryCount] = React.useState(0);\n  const mapRef = React.useRef(null);\n  const markersRef = React.useRef({});\n  const leafletLoadedRef = React.useRef(false);\n  const {\n    user,\n    logout\n  } = useAuth();\n  const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n  // Optimized Leaflet loading with caching\n  const loadLeaflet = React.useCallback(() => {\n    return new Promise((resolve, reject) => {\n      if (window.L && leafletLoadedRef.current) {\n        resolve(window.L);\n        return;\n      }\n      if (leafletLoadedRef.current) {\n        // If already loading, wait for it\n        const checkLoaded = setInterval(() => {\n          if (window.L) {\n            clearInterval(checkLoaded);\n            resolve(window.L);\n          }\n        }, 100);\n        return;\n      }\n      leafletLoadedRef.current = true;\n\n      // Load CSS first\n      const link = document.createElement('link');\n      link.rel = \"stylesheet\";\n      link.href = \"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\";\n      document.head.appendChild(link);\n\n      // Load JS\n      const script = document.createElement('script');\n      script.src = \"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js\";\n      script.async = true;\n      document.head.appendChild(script);\n      script.onload = () => resolve(window.L);\n      script.onerror = () => {\n        leafletLoadedRef.current = false;\n        reject(new Error(\"Failed to load map library\"));\n      };\n    });\n  }, []);\n\n  // Effect 1: Initialize map with performance optimization\n  React.useEffect(() => {\n    let isMounted = true;\n    let loadingTimeout;\n    const initialize = async () => {\n      try {\n        // Add timeout for loading\n        loadingTimeout = setTimeout(() => {\n          if (isMounted) {\n            setError(\"Map is taking longer than expected to load. Please check your connection.\");\n          }\n        }, 10000);\n        const L = await loadLeaflet();\n        if (isMounted && mapRef.current && !mapRef.current._leaflet_id) {\n          clearTimeout(loadingTimeout);\n          const mapInstance = L.map(mapRef.current, {\n            preferCanvas: true,\n            // Better performance\n            zoomControl: true,\n            attributionControl: false\n          }).setView([10.176, 76.430], 15);\n          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            maxZoom: 18,\n            attribution: '© OpenStreetMap contributors'\n          }).addTo(mapInstance);\n          setMap(mapInstance);\n        }\n      } catch (err) {\n        clearTimeout(loadingTimeout);\n        if (isMounted) {\n          setError(err.message);\n          setIsLoading(false);\n        }\n      }\n    };\n    initialize();\n    return () => {\n      isMounted = false;\n      if (loadingTimeout) clearTimeout(loadingTimeout);\n    };\n  }, [loadLeaflet]);\n\n  // Effect 2: Optimized data fetching with retry logic\n  React.useEffect(() => {\n    if (!map) return;\n    let isMounted = true;\n    let fetchTimeout;\n    const fetchData = async () => {\n      try {\n        setError(null);\n\n        // Add fetch timeout\n        const controller = new AbortController();\n        fetchTimeout = setTimeout(() => controller.abort(), 8000);\n        const response = await fetch(`${API_BASE_URL}/api/map/`, {\n          signal: controller.signal,\n          headers: {\n            'Cache-Control': 'no-cache',\n            'Pragma': 'no-cache'\n          }\n        });\n        clearTimeout(fetchTimeout);\n        if (!response.ok) {\n          throw new Error(`Server error: ${response.status}`);\n        }\n        const data = await response.json();\n        if (data && data.stations && isMounted) {\n          setStations(data.stations);\n          setIsLoading(false);\n          setRetryCount(0);\n        } else {\n          throw new Error('Invalid data received from server');\n        }\n      } catch (err) {\n        clearTimeout(fetchTimeout);\n        if (isMounted) {\n          if (err.name === 'AbortError') {\n            setError('Request timeout - server is taking too long to respond');\n          } else {\n            setError(err.message);\n          }\n          setIsLoading(false);\n        }\n      }\n    };\n    fetchData();\n\n    // Reduced polling interval for better performance\n    const interval = setInterval(fetchData, 60000); // 1 minute instead of 5\n\n    return () => {\n      isMounted = false;\n      clearInterval(interval);\n      if (fetchTimeout) clearTimeout(fetchTimeout);\n    };\n  }, [map, API_BASE_URL, retryCount]);\n\n  // Effect 3: Optimized marker updates\n  React.useEffect(() => {\n    if (!map || Object.keys(stations).length === 0) return;\n    const updateMarkers = () => {\n      Object.entries(stations).forEach(([id, station]) => {\n        var _station$station_info, _station$station_info2;\n        if (!(station !== null && station !== void 0 && (_station$station_info = station.station_info) !== null && _station$station_info !== void 0 && _station$station_info.lat) || !(station !== null && station !== void 0 && (_station$station_info2 = station.station_info) !== null && _station$station_info2 !== void 0 && _station$station_info2.lng)) return;\n        const {\n          lat,\n          lng\n        } = station.station_info;\n        const aqi = station.highest_sub_index;\n        const popupContent = `\n          <div class=\"marker-popup\">\n            <h4>${station.station_info.name}</h4>\n            <p><strong>AQI:</strong> <span style=\"color: ${getAQIColor(aqi)}\">${aqi ? Math.round(aqi) : 'N/A'}</span></p>\n            <small>Click to view details</small>\n          </div>\n        `;\n        if (markersRef.current[id]) {\n          markersRef.current[id].setLatLng([lat, lng]).setPopupContent(popupContent).setStyle({\n            fillColor: getAQIColor(aqi)\n          });\n        } else {\n          const marker = window.L.circleMarker([lat, lng], {\n            radius: 12,\n            fillColor: getAQIColor(aqi),\n            color: '#ffffff',\n            weight: 2,\n            opacity: 1,\n            fillOpacity: 0.9\n          }).addTo(map);\n          marker.bindPopup(popupContent);\n          marker.on('click', () => setSelectedStationId(id));\n          markersRef.current[id] = marker;\n        }\n      });\n    };\n\n    // Debounce marker updates\n    const timeoutId = setTimeout(updateMarkers, 100);\n    return () => clearTimeout(timeoutId);\n  }, [map, stations]);\n\n  // Memoized chart data\n  const forecastChartData = React.useMemo(() => {\n    var _stations$selectedSta, _stations$selectedSta2, _stations$selectedSta3, _stations$selectedSta4;\n    return {\n      labels: ((_stations$selectedSta = stations[selectedStationId]) === null || _stations$selectedSta === void 0 ? void 0 : (_stations$selectedSta2 = _stations$selectedSta.forecast_data) === null || _stations$selectedSta2 === void 0 ? void 0 : _stations$selectedSta2.map(d => d.day)) || [],\n      datasets: [{\n        label: `${selectedParameter.toUpperCase()} Forecast`,\n        data: ((_stations$selectedSta3 = stations[selectedStationId]) === null || _stations$selectedSta3 === void 0 ? void 0 : (_stations$selectedSta4 = _stations$selectedSta3.forecast_data) === null || _stations$selectedSta4 === void 0 ? void 0 : _stations$selectedSta4.map(d => d[`${selectedParameter}_max`])) || [],\n        borderColor: '#3b82f6',\n        backgroundColor: 'rgba(59, 130, 246, 0.1)',\n        tension: 0.4,\n        pointBackgroundColor: '#3b82f6',\n        pointBorderColor: '#ffffff',\n        pointBorderWidth: 2,\n        pointRadius: 4\n      }]\n    };\n  }, [stations, selectedStationId, selectedParameter]);\n  const parameterButtons = React.useMemo(() => [{\n    key: 'pm25',\n    label: 'PM2.5',\n    icon: 'fas fa-smog'\n  }, {\n    key: 'pm10',\n    label: 'PM10',\n    icon: 'fas fa-cloud'\n  }, {\n    key: 'nh3',\n    label: 'NH3',\n    icon: 'fas fa-flask'\n  }, {\n    key: 'so2',\n    label: 'SO2',\n    icon: 'fas fa-atom'\n  }, {\n    key: 'no2',\n    label: 'NO2',\n    icon: 'fas fa-industry'\n  }, {\n    key: 'co',\n    label: 'CO',\n    icon: 'fas fa-car'\n  }, {\n    key: 'o3',\n    label: 'O3',\n    icon: 'fas fa-sun'\n  }], []);\n\n  // Event handlers\n  const handleRetry = React.useCallback(() => {\n    setRetryCount(prev => prev + 1);\n    setIsLoading(true);\n    setError(null);\n  }, []);\n  const toggleMenu = React.useCallback(() => {\n    setIsMenuOpen(prev => !prev);\n  }, []);\n  const selectedStationData = stations[selectedStationId];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-page-enhanced\",\n    children: [/*#__PURE__*/_jsxDEV(MapNavbar, {\n      user: user,\n      logout: logout,\n      onMenuToggle: toggleMenu,\n      isMenuOpen: isMenuOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-container-enhanced\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"map\",\n        ref: mapRef,\n        className: \"map-element\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(MapLoadingOverlay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 23\n      }, this), error && !isLoading && /*#__PURE__*/_jsxDEV(ErrorDisplay, {\n        error: error,\n        onRetry: handleRetry\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-controls\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"map-control-btn\",\n          onClick: () => map && map.setView([10.176, 76.430], 15),\n          title: \"Reset View\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `details-panel-enhanced ${selectedStationData ? 'open' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-header-enhanced\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"panel-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-map-marker-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this), \"Monitoring Stations\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"station-selector-enhanced\",\n          children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"station-skeleton\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"skeleton-item\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"skeleton-item\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this) : Object.keys(stations).map(stationId => {\n            var _stations$stationId, _stations$stationId$s, _stations$stationId2, _stations$stationId3;\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `station-btn-enhanced ${selectedStationId === stationId ? 'active' : ''}`,\n              onClick: () => setSelectedStationId(stationId),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"station-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"station-name\",\n                  children: ((_stations$stationId = stations[stationId]) === null || _stations$stationId === void 0 ? void 0 : (_stations$stationId$s = _stations$stationId.station_info) === null || _stations$stationId$s === void 0 ? void 0 : _stations$stationId$s.name) || stationId\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"station-aqi\",\n                  style: {\n                    color: getAQIColor((_stations$stationId2 = stations[stationId]) === null || _stations$stationId2 === void 0 ? void 0 : _stations$stationId2.highest_sub_index)\n                  },\n                  children: [\"AQI: \", Math.round((_stations$stationId3 = stations[stationId]) === null || _stations$stationId3 === void 0 ? void 0 : _stations$stationId3.highest_sub_index) || 'N/A']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 19\n              }, this)\n            }, stationId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-content-enhanced\",\n        children: selectedStationData ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aqi-overview-enhanced\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"aqi-main\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"aqi-value-large\",\n                style: {\n                  color: getAQIColor(selectedStationData.highest_sub_index)\n                },\n                children: Math.round(selectedStationData.highest_sub_index) || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"aqi-status-enhanced\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"aqi-label\",\n                  children: \"Air Quality Index\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"aqi-status-text\",\n                  children: selectedStationData.aqi_status || 'Unknown'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"aqi-indicator\",\n              style: {\n                backgroundColor: getAQIColor(selectedStationData.highest_sub_index)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"metrics-grid-enhanced\",\n            children: ['pm25', 'pm10', 'so2', 'no2', 'co', 'o3', 'nh3'].map(key => {\n              var _parameterButtons$fin, _selectedStationData$;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"metric-card-enhanced\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"metric-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"metric-label\",\n                    children: key.toUpperCase()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 464,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: ((_parameterButtons$fin = parameterButtons.find(p => p.key === key)) === null || _parameterButtons$fin === void 0 ? void 0 : _parameterButtons$fin.icon) || 'fas fa-circle'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 465,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"metric-value-large\",\n                  children: (_selectedStationData$ = selectedStationData.averages) !== null && _selectedStationData$ !== void 0 && _selectedStationData$[key] ? Math.round(selectedStationData.averages[key]) : '--'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"metric-unit\",\n                  children: \"\\u03BCg/m\\xB3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 472,\n                  columnNumber: 21\n                }, this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"forecast-section-enhanced\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"forecast-header\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"forecast-title\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-chart-line\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 21\n                }, this), \"4-Day Forecast\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"parameter-controls-enhanced\",\n              children: parameterButtons.map(param => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `parameter-btn-enhanced ${selectedParameter === param.key ? 'active' : ''}`,\n                onClick: () => setSelectedParameter(param.key),\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: param.icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 492,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: param.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 23\n                }, this)]\n              }, param.key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 17\n            }, this), selectedStationData.forecast_data && selectedStationData.forecast_data.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chart-container-enhanced\",\n              children: /*#__PURE__*/_jsxDEV(Line, {\n                data: forecastChartData,\n                options: {\n                  responsive: true,\n                  maintainAspectRatio: false,\n                  plugins: {\n                    legend: {\n                      display: false\n                    },\n                    tooltip: {\n                      backgroundColor: 'rgba(0,0,0,0.8)',\n                      titleColor: '#fff',\n                      bodyColor: '#fff',\n                      borderColor: '#3b82f6',\n                      borderWidth: 1\n                    }\n                  },\n                  scales: {\n                    y: {\n                      ticks: {\n                        color: '#94a3b8',\n                        beginAtZero: true\n                      },\n                      grid: {\n                        color: 'rgba(148, 163, 184, 0.1)'\n                      }\n                    },\n                    x: {\n                      ticks: {\n                        color: '#94a3b8'\n                      },\n                      grid: {\n                        color: 'rgba(148, 163, 184, 0.1)'\n                      }\n                    }\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-forecast\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-exclamation-circle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Forecast data is not available\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-loading\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-spinner-small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading station data...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 374,\n    columnNumber: 5\n  }, this);\n};\n_s2(MapPage, \"xz4/1YiUXEsyVylnA7zZ0QHTqOI=\", false, function () {\n  return [useAuth];\n});\n_c4 = MapPage;\nexport default MapPage;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"MapNavbar\");\n$RefreshReg$(_c2, \"MapLoadingOverlay\");\n$RefreshReg$(_c3, \"ErrorDisplay\");\n$RefreshReg$(_c4, \"MapPage\");","map":{"version":3,"names":["React","Link","useNavigate","Line","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","getAQIColor","aqi","undefined","MapNavbar","user","logout","onMenuToggle","isMenuOpen","_s","navigate","handleLogout","useCallback","handleDashboardNavigation","className","children","to","src","alt","loading","width","height","fileName","_jsxFileName","lineNumber","columnNumber","onClick","name","_c","MapLoadingOverlay","_c2","ErrorDisplay","error","onRetry","_c3","MapPage","_s2","map","setMap","useState","stations","setStations","selectedStationId","setSelectedStationId","isLoading","setIsLoading","setError","selectedParameter","setSelectedParameter","setIsMenuOpen","retryCount","setRetryCount","mapRef","useRef","markersRef","leafletLoadedRef","API_BASE_URL","process","env","REACT_APP_API_URL","loadLeaflet","Promise","resolve","reject","window","L","current","checkLoaded","setInterval","clearInterval","link","document","createElement","rel","href","head","appendChild","script","async","onload","onerror","Error","useEffect","isMounted","loadingTimeout","initialize","setTimeout","_leaflet_id","clearTimeout","mapInstance","preferCanvas","zoomControl","attributionControl","setView","tileLayer","maxZoom","attribution","addTo","err","message","fetchTimeout","fetchData","controller","AbortController","abort","response","fetch","signal","headers","ok","status","data","json","interval","Object","keys","length","updateMarkers","entries","forEach","id","station","_station$station_info","_station$station_info2","station_info","lat","lng","highest_sub_index","popupContent","Math","round","setLatLng","setPopupContent","setStyle","fillColor","marker","circleMarker","radius","color","weight","opacity","fillOpacity","bindPopup","on","timeoutId","forecastChartData","useMemo","_stations$selectedSta","_stations$selectedSta2","_stations$selectedSta3","_stations$selectedSta4","labels","forecast_data","d","day","datasets","label","toUpperCase","borderColor","backgroundColor","tension","pointBackgroundColor","pointBorderColor","pointBorderWidth","pointRadius","parameterButtons","key","icon","handleRetry","prev","toggleMenu","selectedStationData","ref","title","stationId","_stations$stationId","_stations$stationId$s","_stations$stationId2","_stations$stationId3","style","aqi_status","_parameterButtons$fin","_selectedStationData$","find","p","averages","param","options","responsive","maintainAspectRatio","plugins","legend","display","tooltip","titleColor","bodyColor","borderWidth","scales","y","ticks","beginAtZero","grid","x","_c4","$RefreshReg$"],"sources":["C:/Users/arathy/React_django/my-django-react-app/frontend/src/components/MapPage.js"],"sourcesContent":["import React from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Line } from 'react-chartjs-2';\r\nimport { useAuth } from '../App';\r\nimport './css/MapPage.css';\r\n\r\n// Helper function to get AQI color\r\nconst getAQIColor = (aqi) => {\r\n  if (aqi === null || aqi === undefined) return '#6b7280';\r\n  if (aqi <= 50) return '#10b981';\r\n  if (aqi <= 100) return '#f59e0b';\r\n  if (aqi <= 150) return '#ef4444';\r\n  if (aqi <= 200) return '#dc2626';\r\n  if (aqi <= 300) return '#7c2d12';\r\n  return '#4c1d95';\r\n};\r\n\r\n// Optimized Navbar Component\r\nconst MapNavbar = ({ user, logout, onMenuToggle, isMenuOpen }) => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogout = React.useCallback(() => {\r\n    logout();\r\n    navigate('/');\r\n  }, [logout, navigate]);\r\n\r\n  const handleDashboardNavigation = React.useCallback(() => {\r\n    if (user) {\r\n      navigate('/dashboard');\r\n    } else {\r\n      navigate('/login');\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  return (\r\n    <nav className=\"map-navbar\">\r\n      <div className=\"navbar-content\">\r\n        <Link to=\"/\" className=\"navbar-brand\">\r\n          <img \r\n            src=\"/aqi.webp\" \r\n            alt=\"AQM Logo\" \r\n            loading=\"lazy\" \r\n            width=\"32\" \r\n            height=\"32\"\r\n          />\r\n          <span>AirAware</span>\r\n        </Link>\r\n\r\n        <div className=\"menu-toggle\" onClick={onMenuToggle}>\r\n          <i className=\"fas fa-bars\"></i>\r\n        </div>\r\n\r\n        <ul className={`nav-links ${isMenuOpen ? 'active' : ''}`}>\r\n          <li><Link to=\"/\" className=\"nav-link\">Home</Link></li>\r\n          <li><Link to=\"/map\" className=\"nav-link active\">Live Map</Link></li>\r\n          \r\n          {user ? (\r\n            <>\r\n              <li>\r\n                <button onClick={handleDashboardNavigation} className=\"nav-link nav-button\">\r\n                  <i className=\"fas fa-chart-bar\"></i> Dashboard\r\n                </button>\r\n              </li>\r\n              <li className=\"nav-link user-greeting\">\r\n                <i className=\"fas fa-user-circle\"></i> {user.name}\r\n              </li>\r\n              <li>\r\n                <button onClick={handleLogout} className=\"nav-link logout-btn nav-button\">\r\n                  <i className=\"fas fa-sign-out-alt\"></i> Logout\r\n                </button>\r\n              </li>\r\n            </>\r\n          ) : (\r\n            <li><Link to=\"/login\" className=\"nav-link login-btn\">\r\n              <i className=\"fas fa-sign-in-alt\"></i> Login\r\n            </Link></li>\r\n          )}\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\n// Enhanced Loading Component\r\nconst MapLoadingOverlay = () => (\r\n  <div className=\"map-loading-overlay\">\r\n    <div className=\"loading-content\">\r\n      <div className=\"loading-spinner-enhanced\">\r\n        <div className=\"spinner-ring\"></div>\r\n        <div className=\"spinner-ring\"></div>\r\n        <div className=\"spinner-ring\"></div>\r\n      </div>\r\n      <div className=\"loading-text\">\r\n        <h3>Loading Air Quality Data</h3>\r\n        <p>Fetching real-time monitoring stations...</p>\r\n        <div className=\"loading-progress\">\r\n          <div className=\"progress-bar\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// Enhanced Error Component\r\nconst ErrorDisplay = ({ error, onRetry }) => (\r\n  <div className=\"error-display\">\r\n    <div className=\"error-content\">\r\n      <i className=\"fas fa-exclamation-triangle error-icon\"></i>\r\n      <h3>Connection Error</h3>\r\n      <p>{error}</p>\r\n      <button onClick={onRetry} className=\"retry-button\">\r\n        <i className=\"fas fa-refresh\"></i> Retry\r\n      </button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// Main Component\r\nconst MapPage = () => {\r\n  const [map, setMap] = React.useState(null);\r\n  const [stations, setStations] = React.useState({});\r\n  const [selectedStationId, setSelectedStationId] = React.useState('lora-v1');\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n  const [error, setError] = React.useState(null);\r\n  const [selectedParameter, setSelectedParameter] = React.useState('pm25');\r\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\r\n  const [retryCount, setRetryCount] = React.useState(0);\r\n\r\n  const mapRef = React.useRef(null);\r\n  const markersRef = React.useRef({});\r\n  const leafletLoadedRef = React.useRef(false);\r\n  const { user, logout } = useAuth();\r\n  \r\n  const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\r\n\r\n  // Optimized Leaflet loading with caching\r\n  const loadLeaflet = React.useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      if (window.L && leafletLoadedRef.current) {\r\n        resolve(window.L);\r\n        return;\r\n      }\r\n\r\n      if (leafletLoadedRef.current) {\r\n        // If already loading, wait for it\r\n        const checkLoaded = setInterval(() => {\r\n          if (window.L) {\r\n            clearInterval(checkLoaded);\r\n            resolve(window.L);\r\n          }\r\n        }, 100);\r\n        return;\r\n      }\r\n\r\n      leafletLoadedRef.current = true;\r\n\r\n      // Load CSS first\r\n      const link = document.createElement('link');\r\n      link.rel = \"stylesheet\";\r\n      link.href = \"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\";\r\n      document.head.appendChild(link);\r\n\r\n      // Load JS\r\n      const script = document.createElement('script');\r\n      script.src = \"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js\";\r\n      script.async = true;\r\n      document.head.appendChild(script);\r\n\r\n      script.onload = () => resolve(window.L);\r\n      script.onerror = () => {\r\n        leafletLoadedRef.current = false;\r\n        reject(new Error(\"Failed to load map library\"));\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  // Effect 1: Initialize map with performance optimization\r\n  React.useEffect(() => {\r\n    let isMounted = true;\r\n    let loadingTimeout;\r\n\r\n    const initialize = async () => {\r\n      try {\r\n        // Add timeout for loading\r\n        loadingTimeout = setTimeout(() => {\r\n          if (isMounted) {\r\n            setError(\"Map is taking longer than expected to load. Please check your connection.\");\r\n          }\r\n        }, 10000);\r\n\r\n        const L = await loadLeaflet();\r\n        \r\n        if (isMounted && mapRef.current && !mapRef.current._leaflet_id) {\r\n          clearTimeout(loadingTimeout);\r\n          \r\n          const mapInstance = L.map(mapRef.current, {\r\n            preferCanvas: true, // Better performance\r\n            zoomControl: true,\r\n            attributionControl: false\r\n          }).setView([10.176, 76.430], 15);\r\n          \r\n          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            maxZoom: 18,\r\n            attribution: '© OpenStreetMap contributors'\r\n          }).addTo(mapInstance);\r\n          \r\n          setMap(mapInstance);\r\n        }\r\n      } catch (err) {\r\n        clearTimeout(loadingTimeout);\r\n        if (isMounted) {\r\n          setError(err.message);\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    initialize();\r\n    \r\n    return () => { \r\n      isMounted = false; \r\n      if (loadingTimeout) clearTimeout(loadingTimeout);\r\n    };\r\n  }, [loadLeaflet]);\r\n\r\n  // Effect 2: Optimized data fetching with retry logic\r\n  React.useEffect(() => {\r\n    if (!map) return;\r\n\r\n    let isMounted = true;\r\n    let fetchTimeout;\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        setError(null);\r\n        \r\n        // Add fetch timeout\r\n        const controller = new AbortController();\r\n        fetchTimeout = setTimeout(() => controller.abort(), 8000);\r\n\r\n        const response = await fetch(`${API_BASE_URL}/api/map/`, {\r\n          signal: controller.signal,\r\n          headers: {\r\n            'Cache-Control': 'no-cache',\r\n            'Pragma': 'no-cache'\r\n          }\r\n        });\r\n\r\n        clearTimeout(fetchTimeout);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Server error: ${response.status}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        \r\n        if (data && data.stations && isMounted) {\r\n          setStations(data.stations);\r\n          setIsLoading(false);\r\n          setRetryCount(0);\r\n        } else {\r\n          throw new Error('Invalid data received from server');\r\n        }\r\n      } catch (err) {\r\n        clearTimeout(fetchTimeout);\r\n        if (isMounted) {\r\n          if (err.name === 'AbortError') {\r\n            setError('Request timeout - server is taking too long to respond');\r\n          } else {\r\n            setError(err.message);\r\n          }\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n    \r\n    // Reduced polling interval for better performance\r\n    const interval = setInterval(fetchData, 60000); // 1 minute instead of 5\r\n\r\n    return () => {\r\n      isMounted = false;\r\n      clearInterval(interval);\r\n      if (fetchTimeout) clearTimeout(fetchTimeout);\r\n    };\r\n  }, [map, API_BASE_URL, retryCount]);\r\n\r\n  // Effect 3: Optimized marker updates\r\n  React.useEffect(() => {\r\n    if (!map || Object.keys(stations).length === 0) return;\r\n\r\n    const updateMarkers = () => {\r\n      Object.entries(stations).forEach(([id, station]) => {\r\n        if (!station?.station_info?.lat || !station?.station_info?.lng) return;\r\n\r\n        const { lat, lng } = station.station_info;\r\n        const aqi = station.highest_sub_index;\r\n        const popupContent = `\r\n          <div class=\"marker-popup\">\r\n            <h4>${station.station_info.name}</h4>\r\n            <p><strong>AQI:</strong> <span style=\"color: ${getAQIColor(aqi)}\">${aqi ? Math.round(aqi) : 'N/A'}</span></p>\r\n            <small>Click to view details</small>\r\n          </div>\r\n        `;\r\n\r\n        if (markersRef.current[id]) {\r\n          markersRef.current[id]\r\n            .setLatLng([lat, lng])\r\n            .setPopupContent(popupContent)\r\n            .setStyle({ fillColor: getAQIColor(aqi) });\r\n        } else {\r\n          const marker = window.L.circleMarker([lat, lng], {\r\n            radius: 12,\r\n            fillColor: getAQIColor(aqi),\r\n            color: '#ffffff',\r\n            weight: 2,\r\n            opacity: 1,\r\n            fillOpacity: 0.9\r\n          }).addTo(map);\r\n          \r\n          marker.bindPopup(popupContent);\r\n          marker.on('click', () => setSelectedStationId(id));\r\n          markersRef.current[id] = marker;\r\n        }\r\n      });\r\n    };\r\n\r\n    // Debounce marker updates\r\n    const timeoutId = setTimeout(updateMarkers, 100);\r\n    return () => clearTimeout(timeoutId);\r\n  }, [map, stations]);\r\n\r\n  // Memoized chart data\r\n  const forecastChartData = React.useMemo(() => ({\r\n    labels: stations[selectedStationId]?.forecast_data?.map(d => d.day) || [],\r\n    datasets: [{\r\n      label: `${selectedParameter.toUpperCase()} Forecast`,\r\n      data: stations[selectedStationId]?.forecast_data?.map(d => d[`${selectedParameter}_max`]) || [],\r\n      borderColor: '#3b82f6',\r\n      backgroundColor: 'rgba(59, 130, 246, 0.1)',\r\n      tension: 0.4,\r\n      pointBackgroundColor: '#3b82f6',\r\n      pointBorderColor: '#ffffff',\r\n      pointBorderWidth: 2,\r\n      pointRadius: 4\r\n    }]\r\n  }), [stations, selectedStationId, selectedParameter]);\r\n\r\n  const parameterButtons = React.useMemo(() => [\r\n    { key: 'pm25', label: 'PM2.5', icon: 'fas fa-smog' },\r\n    { key: 'pm10', label: 'PM10', icon: 'fas fa-cloud' },\r\n    { key: 'nh3', label: 'NH3', icon: 'fas fa-flask' },\r\n    { key: 'so2', label: 'SO2', icon: 'fas fa-atom' },\r\n    { key: 'no2', label: 'NO2', icon: 'fas fa-industry' },\r\n    { key: 'co', label: 'CO', icon: 'fas fa-car' },\r\n    { key: 'o3', label: 'O3', icon: 'fas fa-sun' }\r\n  ], []);\r\n\r\n  // Event handlers\r\n  const handleRetry = React.useCallback(() => {\r\n    setRetryCount(prev => prev + 1);\r\n    setIsLoading(true);\r\n    setError(null);\r\n  }, []);\r\n\r\n  const toggleMenu = React.useCallback(() => {\r\n    setIsMenuOpen(prev => !prev);\r\n  }, []);\r\n\r\n  const selectedStationData = stations[selectedStationId];\r\n\r\n  return (\r\n    <div className=\"map-page-enhanced\">\r\n      <MapNavbar \r\n        user={user} \r\n        logout={logout} \r\n        onMenuToggle={toggleMenu} \r\n        isMenuOpen={isMenuOpen} \r\n      />\r\n      \r\n      <div className=\"map-container-enhanced\">\r\n        <div id=\"map\" ref={mapRef} className=\"map-element\"></div>\r\n        \r\n        {isLoading && <MapLoadingOverlay />}\r\n        \r\n        {error && !isLoading && (\r\n          <ErrorDisplay error={error} onRetry={handleRetry} />\r\n        )}\r\n        \r\n        <div className=\"map-controls\">\r\n          <button \r\n            className=\"map-control-btn\"\r\n            onClick={() => map && map.setView([10.176, 76.430], 15)}\r\n            title=\"Reset View\"\r\n          >\r\n            <i className=\"fas fa-home\"></i>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`details-panel-enhanced ${selectedStationData ? 'open' : ''}`}>\r\n        <div className=\"panel-header-enhanced\">\r\n          <h2 className=\"panel-title\">\r\n            <i className=\"fas fa-map-marker-alt\"></i>\r\n            Monitoring Stations\r\n          </h2>\r\n          \r\n          <div className=\"station-selector-enhanced\">\r\n            {isLoading ? (\r\n              <div className=\"station-skeleton\">\r\n                <div className=\"skeleton-item\"></div>\r\n                <div className=\"skeleton-item\"></div>\r\n              </div>\r\n            ) : (\r\n              Object.keys(stations).map(stationId => (\r\n                <button\r\n                  key={stationId}\r\n                  className={`station-btn-enhanced ${selectedStationId === stationId ? 'active' : ''}`}\r\n                  onClick={() => setSelectedStationId(stationId)}\r\n                >\r\n                  <div className=\"station-info\">\r\n                    <span className=\"station-name\">\r\n                      {stations[stationId]?.station_info?.name || stationId}\r\n                    </span>\r\n                    <span className=\"station-aqi\" style={{ \r\n                      color: getAQIColor(stations[stationId]?.highest_sub_index) \r\n                    }}>\r\n                      AQI: {Math.round(stations[stationId]?.highest_sub_index) || 'N/A'}\r\n                    </span>\r\n                  </div>\r\n                </button>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"panel-content-enhanced\">\r\n          {selectedStationData ? (\r\n            <>\r\n              <div className=\"aqi-overview-enhanced\">\r\n                <div className=\"aqi-main\">\r\n                  <div className=\"aqi-value-large\" style={{ \r\n                    color: getAQIColor(selectedStationData.highest_sub_index) \r\n                  }}>\r\n                    {Math.round(selectedStationData.highest_sub_index) || 'N/A'}\r\n                  </div>\r\n                  <div className=\"aqi-status-enhanced\">\r\n                    <span className=\"aqi-label\">Air Quality Index</span>\r\n                    <span className=\"aqi-status-text\">\r\n                      {selectedStationData.aqi_status || 'Unknown'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"aqi-indicator\" style={{ \r\n                  backgroundColor: getAQIColor(selectedStationData.highest_sub_index) \r\n                }}></div>\r\n              </div>\r\n\r\n              <div className=\"metrics-grid-enhanced\">\r\n                {['pm25', 'pm10', 'so2', 'no2', 'co', 'o3', 'nh3'].map(key => (\r\n                  <div key={key} className=\"metric-card-enhanced\">\r\n                    <div className=\"metric-header\">\r\n                      <span className=\"metric-label\">{key.toUpperCase()}</span>\r\n                      <i className={parameterButtons.find(p => p.key === key)?.icon || 'fas fa-circle'}></i>\r\n                    </div>\r\n                    <div className=\"metric-value-large\">\r\n                      {selectedStationData.averages?.[key] ? \r\n                        Math.round(selectedStationData.averages[key]) : '--'\r\n                      }\r\n                    </div>\r\n                    <div className=\"metric-unit\">μg/m³</div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <div className=\"forecast-section-enhanced\">\r\n                <div className=\"forecast-header\">\r\n                  <h3 className=\"forecast-title\">\r\n                    <i className=\"fas fa-chart-line\"></i>\r\n                    4-Day Forecast\r\n                  </h3>\r\n                </div>\r\n\r\n                <div className=\"parameter-controls-enhanced\">\r\n                  {parameterButtons.map(param => (\r\n                    <button\r\n                      key={param.key}\r\n                      className={`parameter-btn-enhanced ${selectedParameter === param.key ? 'active' : ''}`}\r\n                      onClick={() => setSelectedParameter(param.key)}\r\n                    >\r\n                      <i className={param.icon}></i>\r\n                      <span>{param.label}</span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n\r\n                {selectedStationData.forecast_data && selectedStationData.forecast_data.length > 0 ? (\r\n                  <div className=\"chart-container-enhanced\">\r\n                    <Line\r\n                      data={forecastChartData}\r\n                      options={{\r\n                        responsive: true,\r\n                        maintainAspectRatio: false,\r\n                        plugins: {\r\n                          legend: { display: false },\r\n                          tooltip: {\r\n                            backgroundColor: 'rgba(0,0,0,0.8)',\r\n                            titleColor: '#fff',\r\n                            bodyColor: '#fff',\r\n                            borderColor: '#3b82f6',\r\n                            borderWidth: 1\r\n                          }\r\n                        },\r\n                        scales: {\r\n                          y: { \r\n                            ticks: { \r\n                              color: '#94a3b8',\r\n                              beginAtZero: true \r\n                            },\r\n                            grid: { color: 'rgba(148, 163, 184, 0.1)' }\r\n                          },\r\n                          x: { \r\n                            ticks: { color: '#94a3b8' },\r\n                            grid: { color: 'rgba(148, 163, 184, 0.1)' }\r\n                          }\r\n                        }\r\n                      }}\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"no-forecast\">\r\n                    <i className=\"fas fa-exclamation-circle\"></i>\r\n                    <p>Forecast data is not available</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"panel-loading\">\r\n              <div className=\"loading-spinner-small\"></div>\r\n              <p>Loading station data...</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}