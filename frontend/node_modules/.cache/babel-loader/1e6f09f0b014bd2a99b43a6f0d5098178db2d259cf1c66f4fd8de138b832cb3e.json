{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arathy\\\\React_django\\\\my-django-react-app\\\\frontend\\\\src\\\\components\\\\LazyMap.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LazyMap = ({\n  userLocation,\n  stations\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef({});\n  const userMarkerRef = useRef(null);\n  const getAQIColor = aqi => {\n    if (aqi === null || aqi === undefined) return '#6b7280';\n    if (aqi <= 50) return '#10b981';\n    if (aqi <= 100) return '#f59e0b';\n    if (aqi <= 200) return '#ef4444';\n    return '#7c2d12';\n  };\n  const createAqiIcon = (aqi, name) => {\n    const color = getAQIColor(aqi);\n    const iconHtml = `<div style=\"background-color: ${color};\" class=\"aqi-marker-icon\"><div class=\"aqi-marker-icon-inner\">${Math.round(aqi) || 'N/A'}</div></div><div class=\"aqi-marker-label\">${name}</div>`;\n    return window.L.divIcon({\n      html: iconHtml,\n      className: 'custom-div-icon',\n      iconSize: [40, 40],\n      iconAnchor: [20, 40]\n    });\n  };\n  useEffect(() => {\n    if (mapRef.current && !mapInstanceRef.current) {\n      const map = window.L.map(mapRef.current, {\n        zoomControl: false\n      }).setView([10.176, 76.430], 13);\n      window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n      window.L.control.zoom({\n        position: 'topleft'\n      }).addTo(map);\n      mapInstanceRef.current = map;\n    }\n  }, []);\n  useEffect(() => {\n    const map = mapInstanceRef.current;\n    if (!map || !stations) return;\n    Object.values(markersRef.current).forEach(marker => marker.remove());\n    markersRef.current = {};\n    Object.entries(stations).forEach(([id, station]) => {\n      const {\n        lat,\n        lng,\n        name\n      } = station.station_info;\n      const marker = window.L.marker([lat, lng], {\n        icon: createAqiIcon(station.highest_sub_index, name)\n      }).addTo(map);\n      markersRef.current[id] = marker;\n    });\n  }, [stations]);\n  useEffect(() => {\n    const map = mapInstanceRef.current;\n    if (map && userLocation) {\n      map.setView([userLocation.lat, userLocation.lng], 14);\n      if (userMarkerRef.current) {\n        userMarkerRef.current.setLatLng([userLocation.lat, userLocation.lng]);\n      } else {\n        userMarkerRef.current = window.L.marker([userLocation.lat, userLocation.lng]).addTo(map);\n      }\n    }\n  }, [userLocation]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      height: '100%',\n      width: '100%',\n      borderRadius: '12px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 12\n  }, this);\n};\n_s(LazyMap, \"IltqvbPkuctzs6YjR0hbhMP5Yss=\");\n_c = LazyMap;\nexport default LazyMap;\nvar _c;\n$RefreshReg$(_c, \"LazyMap\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","LazyMap","userLocation","stations","_s","mapRef","mapInstanceRef","markersRef","userMarkerRef","getAQIColor","aqi","undefined","createAqiIcon","name","color","iconHtml","Math","round","window","L","divIcon","html","className","iconSize","iconAnchor","current","map","zoomControl","setView","tileLayer","addTo","control","zoom","position","Object","values","forEach","marker","remove","entries","id","station","lat","lng","station_info","icon","highest_sub_index","setLatLng","ref","style","height","width","borderRadius","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/arathy/React_django/my-django-react-app/frontend/src/components/LazyMap.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\n\r\nconst LazyMap = ({ userLocation, stations }) => {\r\n    const mapRef = useRef(null);\r\n    const mapInstanceRef = useRef(null);\r\n    const markersRef = useRef({});\r\n    const userMarkerRef = useRef(null);\r\n\r\n    const getAQIColor = (aqi) => {\r\n        if (aqi === null || aqi === undefined) return '#6b7280';\r\n        if (aqi <= 50) return '#10b981';\r\n        if (aqi <= 100) return '#f59e0b';\r\n        if (aqi <= 200) return '#ef4444';\r\n        return '#7c2d12';\r\n    };\r\n    const createAqiIcon = (aqi, name) => {\r\n        const color = getAQIColor(aqi);\r\n        const iconHtml = `<div style=\"background-color: ${color};\" class=\"aqi-marker-icon\"><div class=\"aqi-marker-icon-inner\">${Math.round(aqi) || 'N/A'}</div></div><div class=\"aqi-marker-label\">${name}</div>`;\r\n        return window.L.divIcon({ html: iconHtml, className: 'custom-div-icon', iconSize: [40, 40], iconAnchor: [20, 40] });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (mapRef.current && !mapInstanceRef.current) {\r\n            const map = window.L.map(mapRef.current, { zoomControl: false }).setView([10.176, 76.430], 13);\r\n            window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\r\n            window.L.control.zoom({ position: 'topleft' }).addTo(map);\r\n            mapInstanceRef.current = map;\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const map = mapInstanceRef.current;\r\n        if (!map || !stations) return;\r\n\r\n        Object.values(markersRef.current).forEach(marker => marker.remove());\r\n        markersRef.current = {};\r\n\r\n        Object.entries(stations).forEach(([id, station]) => {\r\n            const { lat, lng, name } = station.station_info;\r\n            const marker = window.L.marker([lat, lng], { icon: createAqiIcon(station.highest_sub_index, name) }).addTo(map);\r\n            markersRef.current[id] = marker;\r\n        });\r\n\r\n    }, [stations]);\r\n    \r\n    useEffect(() => {\r\n        const map = mapInstanceRef.current;\r\n        if (map && userLocation) {\r\n            map.setView([userLocation.lat, userLocation.lng], 14);\r\n            if (userMarkerRef.current) {\r\n                userMarkerRef.current.setLatLng([userLocation.lat, userLocation.lng]);\r\n            } else {\r\n                userMarkerRef.current = window.L.marker([userLocation.lat, userLocation.lng]).addTo(map);\r\n            }\r\n        }\r\n    }, [userLocation]);\r\n\r\n    return <div ref={mapRef} style={{ height: '100%', width: '100%', borderRadius: '12px' }}></div>;\r\n};\r\n\r\nexport default LazyMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}