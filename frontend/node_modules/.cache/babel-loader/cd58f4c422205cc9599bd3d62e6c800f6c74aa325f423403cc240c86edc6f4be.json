{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback,useMemo}from'react';import{useNavigate}from'react-router-dom';import'./css/Dashboard.css';// Lazy loading components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LazyMap=/*#__PURE__*/React.lazy(()=>import('./LazyMap').catch(()=>({default:()=>/*#__PURE__*/_jsx(\"div\",{className:\"map-fallback\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"map-placeholder\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"map-icon\",children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Interactive map loading...\"})]})})})));const LazyChart=/*#__PURE__*/React.lazy(()=>import('./LazyChart').catch(()=>({default:()=>/*#__PURE__*/_jsx(\"div\",{className:\"chart-fallback\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chart-placeholder\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-icon\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Chart loading...\"})]})})})));// Utility Functions\nconst calculateDistance=(lat1,lon1,lat2,lon2)=>{const R=6371;// km\nconst dLat=(lat2-lat1)*Math.PI/180;const dLon=(lon2-lon1)*Math.PI/180;const a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return R*c;};// Known accurate locations for the area (add your specific coordinates here)\nconst KNOWN_LOCATIONS={// ASIET Campus area\n'10.1783_76.4309':{display_name:'ASIET Campus, Kalady',city:'Kalady',state:'Kerala',country:'India'},// Mattoor Junction area  \n'10.1710_76.4296':{display_name:'Mattoor Junction, Kalady',city:'Kalady',state:'Kerala',country:'India'},// Kalady town center\n'10.1750_76.4300':{display_name:'Kalady Town, Kerala',city:'Kalady',state:'Kerala',country:'India'},// Kalady railway station area\n'10.1765_76.4285':{display_name:'Kalady Railway Station Area',city:'Kalady',state:'Kerala',country:'India'},// Perumbavoor nearby area (if user is from there)\n'10.1800_76.4700':{display_name:'Perumbavoor, Kerala',city:'Perumbavoor',state:'Kerala',country:'India'},// Angamaly area (if user is from there)\n'10.1900_76.3900':{display_name:'Angamaly, Kerala',city:'Angamaly',state:'Kerala',country:'India'}};// Enhanced reverse geocoding with multiple fallback strategies\nconst getLocationName=async(lat,lng)=>{console.log('üîç Getting location name for:',lat,lng);// Strategy 1: Check known locations first (within 1km radius)\nconst coordKey=`${lat.toFixed(4)}_${lng.toFixed(4)}`;if(KNOWN_LOCATIONS[coordKey]){console.log('‚úÖ Using exact known location:',KNOWN_LOCATIONS[coordKey].display_name);return KNOWN_LOCATIONS[coordKey];}// Strategy 2: Check nearby known locations (within 2km)\nfor(const[key,location]of Object.entries(KNOWN_LOCATIONS)){const[knownLat,knownLng]=key.split('_').map(Number);const distance=calculateDistance(lat,lng,knownLat,knownLng);if(distance<2.0){// Within 2km\nconsole.log(`‚úÖ Using nearby known location: ${location.display_name} (${distance.toFixed(2)}km away)`);return{...location,display_name:distance<0.5?location.display_name:`Near ${location.city}, ${location.state}`};}}// Strategy 3: Try multiple geocoding services\nconst geocodingResults=await Promise.allSettled([// OpenStreetMap Nominatim (often more accurate for Indian locations)\nfetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=16&addressdetails=1&accept-language=en`).then(res=>res.json()).then(data=>({service:'OpenStreetMap',data:data,location:parseOpenStreetMapResult(data)})),// BigDataCloud\nfetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lng}&localityLanguage=en`).then(res=>res.json()).then(data=>({service:'BigDataCloud',data:data,location:parseBigDataCloudResult(data)})),// LocationIQ as additional fallback\nfetch(`https://us1.locationiq.com/v1/reverse.php?key=demo&lat=${lat}&lon=${lng}&format=json`).then(res=>res.json()).then(data=>({service:'LocationIQ',data:data,location:parseLocationIQResult(data)})).catch(()=>null)// LocationIQ demo key might not work\n]);// Analyze results and pick the best one\nconst validResults=geocodingResults.filter(result=>result.status==='fulfilled'&&result.value&&result.value.location).map(result=>result.value);console.log('üîç Geocoding results:',validResults);if(validResults.length>0){// Prefer results that mention Kalady, Kerala, or nearby known areas\nconst bestResult=validResults.find(result=>{const location=result.location;const displayName=location.display_name.toLowerCase();return displayName.includes('kalady')||displayName.includes('perumbavoor')||displayName.includes('angamaly')||displayName.includes('ernakulam');})||validResults[0];// Fallback to first valid result\nconsole.log('‚úÖ Using geocoding result from:',bestResult.service,bestResult.location.display_name);return bestResult.location;}// Strategy 4: Intelligent regional fallback based on coordinates\nconst regionalFallback=getRegionalFallback(lat,lng);console.log('‚ö†Ô∏è All geocoding failed, using regional fallback:',regionalFallback.display_name);return regionalFallback;};// Parse OpenStreetMap result\nconst parseOpenStreetMapResult=data=>{if(!data||!data.address)return null;const addr=data.address;const village=addr.village||addr.hamlet||addr.suburb||addr.neighbourhood;const town=addr.town||addr.city||addr.municipality;const district=addr.county||addr.state_district;const state=addr.state||'Kerala';// Prefer village/hamlet over town if available\nconst primaryLocation=village||town||district||'Unknown Location';return{display_name:`${primaryLocation}, ${state}`,city:primaryLocation,state:state,country:addr.country||'India'};};// Parse BigDataCloud result\nconst parseBigDataCloudResult=data=>{if(!data||!data.locality)return null;return{display_name:`${data.locality}, ${data.principalSubdivision||'Kerala'}`,city:data.locality,state:data.principalSubdivision||'Kerala',country:data.countryName||'India'};};// Parse LocationIQ result\nconst parseLocationIQResult=data=>{if(!data||!data.address)return null;const addr=data.address;const primaryLocation=addr.village||addr.town||addr.city||addr.county;return{display_name:`${primaryLocation}, ${addr.state||'Kerala'}`,city:primaryLocation,state:addr.state||'Kerala',country:addr.country||'India'};};// Get regional fallback based on coordinate ranges\nconst getRegionalFallback=(lat,lng)=>{// Kalady/ASIET area coordinates: roughly 10.15-10.20, 76.40-76.45\nif(lat>=10.15&&lat<=10.20&&lng>=76.40&&lng<=76.45){return{display_name:'Kalady Area, Kerala',city:'Kalady',state:'Kerala',country:'India'};}// Perumbavoor area: roughly 10.10-10.25, 76.45-76.50\nif(lat>=10.10&&lat<=10.25&&lng>=76.45&&lng<=76.50){return{display_name:'Perumbavoor Area, Kerala',city:'Perumbavoor',state:'Kerala',country:'India'};}// Angamaly area: roughly 10.15-10.25, 76.35-76.42\nif(lat>=10.15&&lat<=10.25&&lng>=76.35&&lng<=76.42){return{display_name:'Angamaly Area, Kerala',city:'Angamaly',state:'Kerala',country:'India'};}// General Ernakulam district fallback\nif(lat>=9.8&&lat<=10.4&&lng>=76.0&&lng<=77.0){return{display_name:'Ernakulam District, Kerala',city:'Ernakulam District',state:'Kerala',country:'India'};}// Kerala state fallback\nreturn{display_name:`Location in Kerala (${lat.toFixed(3)}, ${lng.toFixed(3)})`,city:'Kerala',state:'Kerala',country:'India'};};function Dashboard(){var _dashboardData$foreca,_dashboardData$foreca2,_dashboardData$foreca3,_dashboardData$foreca4,_healthData$recommend;// ===== STATE MANAGEMENT =====\nconst[username]=useState(()=>{try{const user=JSON.parse(localStorage.getItem('user')||'{}');return user.name||'User';}catch{return'User';}});const[selectedParameter,setSelectedParameter]=useState('pm25');const[isMenuOpen,setIsMenuOpen]=useState(false);const[dashboardData,setDashboardData]=useState(null);const[userLocation,setUserLocation]=useState(null);const[userLocationName,setUserLocationName]=useState(null);const[nearestStationInfo,setNearestStationInfo]=useState(null);const[currentDataInfo,setCurrentDataInfo]=useState(null);const[locationStatus,setLocationStatus]=useState('initializing');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[isLocationUpdating,setIsLocationUpdating]=useState(false);const[lastUpdateTime,setLastUpdateTime]=useState(new Date());const[healthData,setHealthData]=useState(null);// Added health data state\nconst navigate=useNavigate();const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:8000';const locationTimeoutRef=useRef(null);const abortControllerRef=useRef(null);// ===== GET USER LOCATION =====\nconst getUserLocation=useCallback(()=>{return new Promise((resolve,reject)=>{if(!navigator.geolocation){reject(new Error('Geolocation not supported'));return;}setLocationStatus('detecting');setIsLocationUpdating(true);const timeout=setTimeout(()=>{reject(new Error('Location detection timeout'));},10000);navigator.geolocation.getCurrentPosition(async position=>{clearTimeout(timeout);const location={lat:position.coords.latitude,lng:position.coords.longitude,accuracy:position.coords.accuracy,source:'gps',timestamp:Date.now()};if(isNaN(location.lat)||isNaN(location.lng)){reject(new Error('Invalid GPS coordinates'));return;}// Get location name with enhanced accuracy\ntry{const locationName=await getLocationName(location.lat,location.lng);setUserLocationName(locationName);console.log('üìç Location name resolved:',locationName.display_name);}catch(nameError){console.log('‚ùå Failed to get location name:',nameError);// Use regional fallback even on error\nconst fallbackName=getRegionalFallback(location.lat,location.lng);setUserLocationName(fallbackName);}setUserLocation(location);setLocationStatus('gps_detected');setIsLocationUpdating(false);resolve(location);},error=>{clearTimeout(timeout);setLocationStatus('failed');setIsLocationUpdating(false);console.log('GPS error:',error.message);reject(error);},{enableHighAccuracy:true,timeout:10000,maximumAge:300000// 5 minutes\n});});},[]);// ===== FETCH DASHBOARD DATA =====\nconst fetchDashboardData=useCallback(async function(){let locationData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setLoading(true);setError(null);try{if(abortControllerRef.current){abortControllerRef.current.abort();}const controller=new AbortController();abortControllerRef.current=controller;const timeoutId=setTimeout(()=>controller.abort(),15000);// Build URL with location if available\nconst url=new URL(`${API_BASE_URL}/api/dashboard/`);url.searchParams.append('username',username);if(locationData){url.searchParams.append('lat',locationData.lat.toString());url.searchParams.append('lng',locationData.lng.toString());}const response=await fetch(url,{signal:controller.signal,headers:{'Content-Type':'application/json','Accept':'application/json'}});clearTimeout(timeoutId);if(!response.ok){throw new Error(`HTTP ${response.status}: ${response.statusText}`);}const data=await response.json();console.log('‚úÖ Dashboard data received:',data);// FIXED: Set health data from API response\nif(data.health_data){console.log('‚úÖ Health data found:',data.health_data);setHealthData(data.health_data);}processDashboardData(data,locationData);setLastUpdateTime(new Date());setError(null);}catch(error){console.error('‚ùå Error fetching dashboard data:',error);if(error.name!=='AbortError'){setError(`Failed to load dashboard data: ${error.message}`);// Load with sample data as fallback\nloadSampleData();}}finally{setLoading(false);}},[username,API_BASE_URL]);// ===== PROCESS DASHBOARD DATA =====\nconst processDashboardData=useCallback((data,locationData)=>{if(!data||!data.stations){console.warn('No station data received');return;}setDashboardData(data);// Process location context from backend or calculate locally\nconst stations=data.stations;const stationIds=Object.keys(stations);if(locationData&&stationIds.length>0){// Calculate distances to all stations\nconst stationDistances={};stationIds.forEach(stationId=>{const station=stations[stationId];const distance=calculateDistance(locationData.lat,locationData.lng,station.station_info.lat,station.station_info.lng);stationDistances[stationId]={distance:distance,station:station};});// Find nearest station\nconst nearestStationId=Object.keys(stationDistances).reduce((nearest,current)=>stationDistances[current].distance<stationDistances[nearest].distance?current:nearest);const nearestDistance=stationDistances[nearestStationId].distance;const nearestStation=stationDistances[nearestStationId].station;setNearestStationInfo({id:nearestStationId,name:nearestStation.station_info.name,distance:nearestDistance,aqi:nearestStation.highest_sub_index||50});// Check if user is within 1km of any sensor OR between sensors\nconst isWithinSensorRange=Object.values(stationDistances).some(s=>s.distance<=1.0);if(isWithinSensorRange||nearestDistance<=1.0){// Within 1km or between sensors - use interpolation for exact location\nconst idwResult=calculateIDWInterpolation(locationData,stations);setCurrentDataInfo({method:'location_interpolation',source:'interpolated',explanation:`You are ${nearestDistance.toFixed(1)}km from the nearest sensor. Showing calculated air quality for your exact location using data from nearby monitoring stations.`,values:idwResult.interpolated_values,aqi:idwResult.interpolated_aqi,station_name:`Your Location (${(userLocationName===null||userLocationName===void 0?void 0:userLocationName.city)||'Current Position'})`,is_interpolated:true,show_distance_message:true,distance_message:`üìç You are within sensor range (${nearestDistance.toFixed(1)}km from nearest), showing calculated values for your exact location`,data_type:'Your Location Data (Calculated)'});}else{// Beyond 1km from all sensors - show nearest station data\nsetCurrentDataInfo({method:'nearest_station',source:'nearest_station',explanation:`You are ${nearestDistance.toFixed(1)}km from the nearest sensor. Showing data from ${nearestStation.station_info.name} (nearest monitoring station).`,values:nearestStation.averages||{},aqi:nearestStation.highest_sub_index||50,station_name:nearestStation.station_info.name,is_interpolated:false,show_distance_message:true,distance_message:`üìç You are ${nearestDistance.toFixed(1)}km from the nearest sensor node, so you are seeing data from ${nearestStation.station_info.name}`,data_type:'Nearest Station Data'});}}else{var _defaultStation$stati;// No location data - use default station (lora-v1)\nconst defaultStation=stations['lora-v1']||stations[stationIds[0]]||{};setCurrentDataInfo({method:'default_station',source:'default',explanation:'Location not available. Showing data from default monitoring station.',values:defaultStation.averages||{},aqi:defaultStation.highest_sub_index||50,station_name:((_defaultStation$stati=defaultStation.station_info)===null||_defaultStation$stati===void 0?void 0:_defaultStation$stati.name)||'ASIET Campus Station',is_interpolated:false,show_distance_message:false,distance_message:null,data_type:'Default Station Data'});}console.log('üìä Dashboard data processed successfully');},[userLocationName]);// ===== IDW INTERPOLATION CALCULATION =====\nconst calculateIDWInterpolation=useCallback((locationData,stations)=>{const stationIds=Object.keys(stations);let totalWeight=0;const weightedValues={pm25:0,pm10:0,so2:0,no2:0,co:0,o3:0,nh3:0,temp:0,hum:0,pre:0};let weightedAqi=0;stationIds.forEach(stationId=>{const station=stations[stationId];const distance=calculateDistance(locationData.lat,locationData.lng,station.station_info.lat,station.station_info.lng);// Avoid division by zero\nconst safeDistance=Math.max(distance,0.001);const weight=1.0/safeDistance**2;totalWeight+=weight;// Add weighted values\nconst averages=station.averages||{};Object.keys(weightedValues).forEach(param=>{if(averages[param]!==undefined){weightedValues[param]+=averages[param]*weight;}});// Add weighted AQI\nweightedAqi+=(station.highest_sub_index||0)*weight;});// Calculate final interpolated values\nconst interpolated_values={};Object.keys(weightedValues).forEach(param=>{interpolated_values[param]=totalWeight>0?Math.round(weightedValues[param]/totalWeight*100)/100:0;});const interpolated_aqi=totalWeight>0?Math.round(weightedAqi/totalWeight):50;return{interpolated_values,interpolated_aqi,stations_used:stationIds.length,method:'idw'};},[]);// ===== LOAD SAMPLE DATA =====\nconst loadSampleData=useCallback(()=>{console.log('üîÑ Loading sample data...');const sampleData={stations:{'lora-v1':{station_info:{name:'ASIET Campus Station',lat:10.178322,lng:76.430891,description:'Educational Institution Area'},averages:{pm25:25,pm10:42,so2:8,no2:40,co:1.1,o3:46,nh3:93,temp:28,hum:65,pre:1013},highest_sub_index:50,last_updated_on:'Sample Data'},'loradev2':{station_info:{name:'Mattoor Junction Station',lat:10.170950,lng:76.429628,description:'Urban Commercial Area'},averages:{pm25:22,pm10:38,so2:7,no2:35,co:1.0,o3:43,nh3:88,temp:27,hum:68,pre:1012},highest_sub_index:45,last_updated_on:'Sample Data'}},forecasts:{'lora-v1':[{day:'Today',pm25_max:30,pm10_max:37,so2_max:8,no2_max:40,co_max:1.1,o3_max:46,nh3_max:93},{day:'Tomorrow',pm25_max:24,pm10_max:34,so2_max:8,no2_max:45,co_max:1.2,o3_max:43,nh3_max:100},{day:'Day 3',pm25_max:24,pm10_max:30,so2_max:8,no2_max:42,co_max:1.2,o3_max:45,nh3_max:100},{day:'Day 4',pm25_max:20,pm10_max:23,so2_max:8,no2_max:38,co_max:1.2,o3_max:47,nh3_max:100}],'loradev2':[{day:'Today',pm25_max:28,pm10_max:35,so2_max:7,no2_max:38,co_max:1.0,o3_max:44,nh3_max:90},{day:'Tomorrow',pm25_max:22,pm10_max:32,so2_max:7,no2_max:42,co_max:1.1,o3_max:41,nh3_max:95},{day:'Day 3',pm25_max:22,pm10_max:28,so2_max:7,no2_max:40,co_max:1.1,o3_max:43,nh3_max:95},{day:'Day 4',pm25_max:18,pm10_max:21,so2_max:7,no2_max:36,co_max:1.1,o3_max:45,nh3_max:95}]},health_data:{risk_level:'Low',score:75,recommendations:['Enjoy outdoor activities','Open windows for fresh air']}};// Set sample health data\nsetHealthData(sampleData.health_data);processDashboardData(sampleData,userLocation);setLastUpdateTime(new Date());console.log('‚úÖ Sample data loaded');},[userLocation,processDashboardData]);// ===== INITIALIZATION =====\nuseEffect(()=>{const initializeDashboard=async()=>{console.log('‚ö° Initializing dashboard...');// Load initial data immediately\nawait fetchDashboardData();// Try to get user location\ntry{const location=await getUserLocation();console.log('üìç Location obtained:',location);// Refetch data with location\nawait fetchDashboardData(location);}catch(locationError){console.log('üìç Location detection failed:',locationError);setLocationStatus('failed');}};initializeDashboard();return()=>{if(locationTimeoutRef.current){clearTimeout(locationTimeoutRef.current);}if(abortControllerRef.current){abortControllerRef.current.abort();}};},[fetchDashboardData,getUserLocation]);// ===== MEMOIZED VALUES =====\nconst currentValues=useMemo(()=>{return(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.values)||{};},[currentDataInfo]);const currentAQI=useMemo(()=>{return(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.aqi)||50;},[currentDataInfo]);const aqiStatus=useMemo(()=>{const aqi=currentAQI;if(aqi<=50)return{status:'GOOD',color:'#10b981',class:'good'};if(aqi<=100)return{status:'MODERATE',color:'#f59e0b',class:'moderate'};if(aqi<=150)return{status:'UNHEALTHY',color:'#ef4444',class:'unhealthy'};return{status:'HAZARDOUS',color:'#7c2d12',class:'hazardous'};},[currentAQI]);// ===== LOCATION STATUS COMPONENT =====\nconst LocationStatus=useMemo(()=>{const getLocationDisplay=()=>{switch(locationStatus){case'initializing':return/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCD Initializing location detection...\"});case'detecting':return/*#__PURE__*/_jsxs(\"span\",{style:{color:'#f59e0b'},children:[\"\\uD83D\\uDCCD Detecting your location...\",isLocationUpdating&&/*#__PURE__*/_jsx(\"span\",{className:\"location-spinner\",children:\"\\u27F3\"})]});case'gps_detected':const locationName=(userLocationName===null||userLocationName===void 0?void 0:userLocationName.display_name)||'Your location';const accuracy=userLocation!==null&&userLocation!==void 0&&userLocation.accuracy?`¬±${Math.round(userLocation.accuracy)}m`:'';return/*#__PURE__*/_jsxs(\"span\",{style:{color:'#10b981'},children:[\"\\uD83D\\uDCCD \",locationName,\" \",accuracy&&`(${accuracy})`,nearestStationInfo&&/*#__PURE__*/_jsxs(\"span\",{style:{color:'#6b7280',fontSize:'0.9em'},children:[' ',\" \\u2192 Nearest: \",nearestStationInfo.name,\" (\",nearestStationInfo.distance.toFixed(1),\"km)\"]})]});case'failed':return/*#__PURE__*/_jsxs(\"span\",{style:{color:'#ef4444'},children:[\"\\uD83D\\uDCCD Location detection failed - Using default station data\",/*#__PURE__*/_jsx(\"button\",{onClick:getUserLocation,className:\"retry-location-btn\",children:\"\\uD83D\\uDD04 Retry\"})]});default:return/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCD Default location\"});}};return/*#__PURE__*/_jsx(\"div\",{className:\"location-info\",children:getLocationDisplay()});},[locationStatus,userLocationName,userLocation,nearestStationInfo,isLocationUpdating,getUserLocation]);// ===== UI HELPER FUNCTIONS =====\nconst formatValue=useCallback((value,metric)=>{const numValue=parseFloat(value);if(isNaN(numValue))return'0';return metric==='co'?numValue.toFixed(1):Math.round(numValue);},[]);const metricIcons=useMemo(()=>({pm25:'üå±',pm10:'üçÉ',so2:'üè≠',no2:'üí®',co:'‚òÅÔ∏è',o3:'‚òÄÔ∏è',nh3:'‚öóÔ∏è'}),[]);// ===== METRIC CARDS =====\nconst MetricCards=useMemo(()=>{const parameters=['pm25','pm10','so2','no2','co','o3','nh3'];return parameters.map(key=>{const value=currentValues[key]||0;return/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon\",children:metricIcons[key]||'üìä'}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value\",children:formatValue(value,key)}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:key.toUpperCase()}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-unit\",children:key==='co'?'mg/m¬≥':'¬µg/m¬≥'}),(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.is_interpolated)&&/*#__PURE__*/_jsx(\"div\",{className:\"metric-badge interpolated-badge\",children:\"\\uD83C\\uDFAF Your Location\"}),!(currentDataInfo!==null&&currentDataInfo!==void 0&&currentDataInfo.is_interpolated)&&/*#__PURE__*/_jsx(\"div\",{className:\"metric-badge nearest-badge\",children:\"\\uD83D\\uDCCD Nearest Station\"})]},key);});},[currentValues,metricIcons,formatValue,currentDataInfo]);// ===== EVENT HANDLERS =====\nconst handleParameterChange=useCallback(param=>{setSelectedParameter(param);},[]);const toggleMenu=useCallback(()=>setIsMenuOpen(prev=>!prev),[]);const handleLogout=useCallback(()=>{localStorage.clear();navigate('/login');},[navigate]);const handleRefreshData=useCallback(()=>{fetchDashboardData(userLocation);},[fetchDashboardData,userLocation]);const handleEnableLocation=useCallback(async()=>{try{const location=await getUserLocation();await fetchDashboardData(location);}catch(error){console.error('Failed to get location:',error);}},[getUserLocation,fetchDashboardData]);// ===== MAIN RENDER =====\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-page\",children:[error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-banner\",children:[\"\\u26A0\\uFE0F \",error,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(null),className:\"error-close\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"navbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-content\",children:[/*#__PURE__*/_jsxs(\"a\",{href:\"/\",className:\"navbar-brand\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/aqi.webp\",alt:\"AQM Logo\",width:\"40\",height:\"40\",style:{marginRight:'12px'}}),\"AirAware\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"menu-toggle\",onClick:toggleMenu,children:\"\\u2630\"}),/*#__PURE__*/_jsxs(\"ul\",{className:`nav-links ${isMenuOpen?'active':''}`,children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"nav-link\",children:\"\\uD83C\\uDFE0 Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/health-assessment\",className:\"nav-link\",children:\"\\uD83D\\uDCCB Health Update\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/health-report\",className:\"nav-link\",children:\"\\uD83D\\uDCC4 Health Report\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/add-family\",className:\"nav-link\",children:\"\\uD83D\\uDC65 Add Family\"})}),/*#__PURE__*/_jsxs(\"li\",{className:\"user-info\",children:[\"\\uD83D\\uDC64 \",/*#__PURE__*/_jsx(\"span\",{children:username})]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"nav-link login-btn\",children:\"\\uD83D\\uDEAA Logout\"})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:`alert-banner ${aqiStatus.class}`,children:[\"\\u2139\\uFE0F \",/*#__PURE__*/_jsxs(\"span\",{children:[(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.station_name)||'Your Location',\" AQI: \",Math.round(currentAQI),\" - \",aqiStatus.status,nearestStationInfo&&` ‚Ä¢ Distance to nearest sensor: ${nearestStationInfo.distance.toFixed(1)}km`]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"welcome-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-text\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome, \",username,\"!\"]}),LocationStatus,healthData&&/*#__PURE__*/_jsxs(\"div\",{className:\"health-status-inline\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"health-label\",children:\"Your Health Risk Level: \"}),/*#__PURE__*/_jsxs(\"span\",{className:`health-level ${healthData.risk_level.toLowerCase()}`,children:[healthData.risk_level,\" (Score: \",healthData.score,\")\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"aqi-overview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"aqi-value\",style:{color:aqiStatus.color},children:Math.round(currentAQI)}),/*#__PURE__*/_jsx(\"div\",{className:\"aqi-status\",children:currentDataInfo!==null&&currentDataInfo!==void 0&&currentDataInfo.is_interpolated?'Your Location AQI':'Nearest Station AQI'}),/*#__PURE__*/_jsxs(\"div\",{className:\"aqi-badge\",children:[(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.station_name)||'Your Location',(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.is_interpolated)&&/*#__PURE__*/_jsx(\"span\",{className:\"location-indicator\",children:\" \\uD83C\\uDFAF Your Location\"}),!(currentDataInfo!==null&&currentDataInfo!==void 0&&currentDataInfo.is_interpolated)&&/*#__PURE__*/_jsx(\"span\",{className:\"nearest-indicator\",children:\" \\uD83D\\uDCCD Nearest\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"last-updated\",children:[\"Last updated: \",lastUpdateTime.toLocaleTimeString()]})]})]})}),(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.show_distance_message)&&/*#__PURE__*/_jsx(\"div\",{className:\"location-context-banner-horizontal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"location-main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"location-icon-section\",style:{color:currentDataInfo.is_interpolated?'#10b981':'#3b82f6'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"location-icon-large\",children:/*#__PURE__*/_jsx(\"i\",{className:`fas ${currentDataInfo.is_interpolated?'fa-crosshairs':'fa-map-marker-alt'}`})}),/*#__PURE__*/_jsx(\"div\",{className:\"location-badge-large\",children:currentDataInfo.is_interpolated?'üéØ Your Location':'üìç Nearest Station'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-details-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"location-primary-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:currentDataInfo.distance_message}),/*#__PURE__*/_jsx(\"p\",{className:\"location-explanation\",children:currentDataInfo.explanation})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"location-stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDCCD\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Data Source\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.station_name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Method\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:currentDataInfo.is_interpolated?'Smart Interpolation':'Direct Sensor'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83C\\uDFAF\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Current AQI\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",style:{color:aqiStatus.color},children:Math.round(currentAQI)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\u23F0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Last Update\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:lastUpdateTime.toLocaleTimeString()})]})]})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[locationStatus==='failed'&&/*#__PURE__*/_jsx(\"button\",{onClick:handleEnableLocation,className:\"action-btn primary\",children:\"\\uD83D\\uDCCD Enable Location for Personalized Data\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRefreshData,className:\"action-btn secondary\",disabled:loading,children:loading?'üîÑ Refreshing...':'üîÑ Refresh Data'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metrics-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"section-title\",children:[\"\\uD83C\\uDF2C\\uFE0F \",currentDataInfo!==null&&currentDataInfo!==void 0&&currentDataInfo.is_interpolated?'Your Location Air Quality':'Nearest Station Air Quality',(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.is_interpolated)&&/*#__PURE__*/_jsx(\"small\",{children:\" (Calculated for your exact coordinates)\"}),!(currentDataInfo!==null&&currentDataInfo!==void 0&&currentDataInfo.is_interpolated)&&/*#__PURE__*/_jsxs(\"small\",{children:[\" (Data from \",currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.station_name,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"metrics-grid\",children:MetricCards})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"map-section\",className:\"dashboard-card map-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"\\uD83D\\uDDFA\\uFE0F Live Sensor Network\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-controls\",children:[userLocationName&&/*#__PURE__*/_jsxs(\"div\",{className:\"location-display\",children:[\"\\uD83D\\uDCCD \",userLocationName.display_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-legend\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-dot user-location\"}),\"Your Location\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-dot sensor-station\"}),\"Sensor Stations\"]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsx(React.Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{className:\"map-fallback\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"map-placeholder\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"map-icon\",children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading interactive map...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})]})}),children:/*#__PURE__*/_jsx(LazyMap,{userLocation:userLocation,stations:dashboardData===null||dashboardData===void 0?void 0:dashboardData.stations,currentAQI:currentAQI,dataType:(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.method)||'default',nearestStation:nearestStationInfo,userLocationName:userLocationName})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"map-status\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"status-indicator\",children:[\"\\uD83D\\uDD34 LIVE \\u2022 \",Object.keys((dashboardData===null||dashboardData===void 0?void 0:dashboardData.stations)||{}).length,\" stations active\"]}),(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.is_interpolated)&&/*#__PURE__*/_jsx(\"span\",{className:\"smart-badge\",children:\"\\uD83C\\uDFAF Smart Interpolation Active\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"map-description\",children:\"Blue marker shows your location \\u2022 Tower markers show monitoring stations \\u2022 Click any marker for detailed readings\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card forecast-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"\\uD83D\\uDCCA 4-Day Air Quality Forecast\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-source\",children:[\"Data source: \",(nearestStationInfo===null||nearestStationInfo===void 0?void 0:nearestStationInfo.name)||'ASIET Campus Station']}),/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-update\",children:[\"Updated: \",lastUpdateTime.toLocaleTimeString()]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-controls\",children:['pm25','pm10','no2','o3','so2','co','nh3'].map(param=>/*#__PURE__*/_jsx(\"button\",{className:`param-btn ${selectedParameter===param?'active':''}`,onClick:()=>handleParameterChange(param),title:`View ${param.toUpperCase()} forecast`,children:param.toUpperCase()},param))}),/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-section\",children:/*#__PURE__*/_jsx(React.Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{className:\"chart-fallback\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chart-placeholder\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-icon\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading forecast chart...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})]})}),children:/*#__PURE__*/_jsx(LazyChart,{forecastData:nearestStationInfo?dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$foreca=dashboardData.forecasts)===null||_dashboardData$foreca===void 0?void 0:_dashboardData$foreca[nearestStationInfo.id]:dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$foreca2=dashboardData.forecasts)===null||_dashboardData$foreca2===void 0?void 0:_dashboardData$foreca2['lora-v1'],selectedParameter:selectedParameter})})}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-table-section\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"forecast-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uD83D\\uDCC5 Day\"}),/*#__PURE__*/_jsxs(\"th\",{children:[\"\\uD83D\\uDCC8 Max \",selectedParameter.toUpperCase()]}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uD83D\\uDCCA Unit\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(nearestStationInfo&&(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$foreca3=dashboardData.forecasts)===null||_dashboardData$foreca3===void 0?void 0:_dashboardData$foreca3[nearestStationInfo.id])||(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$foreca4=dashboardData.forecasts)===null||_dashboardData$foreca4===void 0?void 0:_dashboardData$foreca4['lora-v1'])||[]).map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"day-cell\",children:item.day}),/*#__PURE__*/_jsx(\"td\",{className:\"value-cell\",children:formatValue(item[`${selectedParameter}_max`]||0,selectedParameter)}),/*#__PURE__*/_jsx(\"td\",{className:\"unit-cell\",children:selectedParameter==='co'?'mg/m¬≥':'¬µg/m¬≥'})]},index))})]})})]})]})]}),healthData&&/*#__PURE__*/_jsx(\"div\",{className:\"health-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"health-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"health-chart-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"\\u2764\\uFE0F Health Status Monitor\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"health-display\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"health-score-circle\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"health-score-value\",children:healthData.score}),/*#__PURE__*/_jsx(\"div\",{className:\"health-score-label\",children:\"Health Score\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"health-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`risk-level ${healthData.risk_level.toLowerCase()}`,children:[healthData.risk_level,\" Risk\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"health-recommendations\",children:(_healthData$recommend=healthData.recommendations)===null||_healthData$recommend===void 0?void 0:_healthData$recommend.map((rec,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"recommendation\",children:[\"\\u2022 \",rec]},index))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"health-advisory\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shield-alt\"}),\"Health Advisory\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"People with asthma, heart disease, older adults, and young children are more susceptible to air pollution. Please follow health advisories closely and seek medical attention if you experience any adverse symptoms.\"}),healthData.risk_level==='High'&&/*#__PURE__*/_jsxs(\"div\",{className:\"emergency-contact\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Emergency Contact:\"}),\" Kerala Pollution Control Board \\u2013 0471-2418566\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"weather-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83C\\uDF24\\uFE0F Weather Conditions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"weather-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"weather-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"weather-icon\",children:\"\\uD83C\\uDF21\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"weather-value\",children:[formatValue(currentValues.temp||28,'temp'),\"\\xB0C\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"weather-label\",children:\"Temperature\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"weather-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"weather-icon\",children:\"\\uD83D\\uDCA7\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"weather-value\",children:[formatValue(currentValues.hum||65,'hum'),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"weather-label\",children:\"Humidity\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"weather-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"weather-icon\",children:\"\\uD83D\\uDCCF\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"weather-value\",children:[formatValue(currentValues.pre||1013,'pre'),\" hPa\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"weather-label\",children:\"Atmospheric Pressure\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-source-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u26A1 System Status & Data Source\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-icon\",children:\"\\uD83D\\uDCCD\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-title\",children:\"Location Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"status-value\",children:locationStatus==='gps_detected'?'GPS Active':locationStatus==='detecting'?'Detecting...':locationStatus==='failed'?'Failed':'Default'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-icon\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-title\",children:\"Data Method\"}),/*#__PURE__*/_jsx(\"div\",{className:\"status-value\",children:currentDataInfo!==null&&currentDataInfo!==void 0&&currentDataInfo.is_interpolated?'Smart Interpolation':'Direct Sensor'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-icon\",children:\"\\uD83D\\uDCE1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-title\",children:\"Data Source\"}),/*#__PURE__*/_jsx(\"div\",{className:\"status-value\",children:(currentDataInfo===null||currentDataInfo===void 0?void 0:currentDataInfo.station_name)||'Default Station'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-icon\",children:\"\\uD83D\\uDD04\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-title\",children:\"Last Update\"}),/*#__PURE__*/_jsx(\"div\",{className:\"status-value\",children:lastUpdateTime.toLocaleTimeString()})]})]})]}),currentDataInfo&&/*#__PURE__*/_jsxs(\"div\",{className:\"data-explanation\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCB Current Data Source Explanation:\"}),/*#__PURE__*/_jsx(\"p\",{children:currentDataInfo.explanation}),currentDataInfo.is_interpolated&&/*#__PURE__*/_jsxs(\"div\",{className:\"interpolation-details\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83C\\uDFAF Spatial Interpolation Method:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Using Inverse Distance Weighting (IDW) algorithm\"}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Data from \",Object.keys((dashboardData===null||dashboardData===void 0?void 0:dashboardData.stations)||{}).length,\" monitoring stations\"]}),/*#__PURE__*/_jsx(\"li\",{children:\"Personalized estimates for your exact coordinates\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Automatically updates when you move to a new location\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-actions\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u26A1 Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-actions-grid\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleEnableLocation,className:\"quick-action-btn\",disabled:locationStatus==='gps_detected',children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-icon\",children:\"\\uD83D\\uDCCD\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-action-text\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-title\",children:locationStatus==='gps_detected'?'Location Active':'Enable Location'}),/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-desc\",children:locationStatus==='gps_detected'?'GPS location is active':'Get personalized air quality data'})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleRefreshData,className:\"quick-action-btn\",disabled:loading,children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-icon\",children:\"\\uD83D\\uDD04\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-action-text\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-title\",children:loading?'Refreshing...':'Refresh Data'}),/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-desc\",children:\"Get latest air quality readings\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{var _document$getElementB;return(_document$getElementB=document.getElementById('map-section'))===null||_document$getElementB===void 0?void 0:_document$getElementB.scrollIntoView({behavior:'smooth'});},className:\"quick-action-btn\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-icon\",children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-action-text\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-title\",children:\"View Map\"}),/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-desc\",children:\"See sensor locations and coverage\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.open('/health-assessment','_self'),className:\"quick-action-btn\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-icon\",children:\"\\uD83D\\uDCCB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-action-text\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-title\",children:\"Health Assessment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-desc\",children:\"Update your health profile\"})]})]})]})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"footer-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"AirAware Kerala\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Smart Air Quality Monitoring System\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Real-time data \\u2022 Personalized insights \\u2022 Health-focused\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"social-links\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"social-link\",children:\"\\uD83D\\uDCD8\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"social-link\",children:\"\\uD83D\\uDC26\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"social-link\",children:\"\\uD83D\\uDCBC\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"social-link\",children:\"\\uD83D\\uDCF7\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Quick Links\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"\\uD83C\\uDFE0 Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/health-report\",children:\"\\uD83D\\uDCC4 Health Report\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/add-family\",children:\"\\uD83D\\uDC65 Add Family\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Data Sources\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"ASIET Campus Station (Direct Sensor)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Mattoor Junction Station (Direct Sensor)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Advanced spatial interpolation algorithms\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Weather integration\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Contact Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Adi Shankara Institute of Engineering and Technology\",/*#__PURE__*/_jsx(\"br\",{}),\"Kalady 683574, Ernakulam\",/*#__PURE__*/_jsx(\"br\",{}),\"Kerala, India\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" aiiot@adishankara.ac.in\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" 0484 246 3825\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-bottom\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2025 AirAware Kerala - Smart Air Quality Monitoring System\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Powered by real sensor data \\u2022 Advanced interpolation \\u2022 Government approved\"})]})]})})]});}export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}