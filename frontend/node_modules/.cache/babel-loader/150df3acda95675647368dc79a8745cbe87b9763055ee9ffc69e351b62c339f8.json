{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arathy\\\\React_django\\\\my-django-react-app\\\\frontend\\\\src\\\\components\\\\LazyMap.js\",\n  _s = $RefreshSig$();\n// components/LazyMap.js\nimport React, { useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LazyMap = ({\n  userLocation,\n  dashboardData,\n  currentAQI\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const containerRef = useRef(null);\n  useEffect(() => {\n    // Only initialize if Leaflet is available\n    if (!window.L || !userLocation) {\n      return;\n    }\n    const initMap = () => {\n      try {\n        // Clean up existing map\n        if (mapRef.current) {\n          mapRef.current.remove();\n          mapRef.current = null;\n        }\n\n        // Create map\n        const map = window.L.map(containerRef.current, {\n          center: [userLocation.lat, userLocation.lng],\n          zoom: 13,\n          zoomControl: true,\n          attributionControl: false\n        });\n\n        // Add tile layer\n        window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n          maxZoom: 18\n        }).addTo(map);\n\n        // Add user marker\n        const userIcon = window.L.divIcon({\n          html: `<div style=\"background: #3b82f6; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);\">üìç</div>`,\n          iconSize: [30, 30],\n          iconAnchor: [15, 15]\n        });\n        window.L.marker([userLocation.lat, userLocation.lng], {\n          icon: userIcon\n        }).addTo(map).bindPopup(`<div style=\"text-align: center;\"><strong>Your Location</strong><br/>AQI: ${currentAQI}</div>`).openPopup();\n\n        // Add station markers\n        if (dashboardData !== null && dashboardData !== void 0 && dashboardData.sensor_locations) {\n          Object.entries(dashboardData.sensor_locations).forEach(([id, location]) => {\n            var _dashboardData$all_st, _dashboardData$all_st2;\n            const aqi = ((_dashboardData$all_st = dashboardData.all_stations_data) === null || _dashboardData$all_st === void 0 ? void 0 : (_dashboardData$all_st2 = _dashboardData$all_st[id]) === null || _dashboardData$all_st2 === void 0 ? void 0 : _dashboardData$all_st2.highest_sub_index) || currentAQI;\n            const stationIcon = window.L.divIcon({\n              html: `<div style=\"background: #10b981; color: white; border-radius: 8px; padding: 4px 8px; font-size: 11px; font-weight: bold;\">üì° ${Math.round(aqi)}</div>`,\n              iconSize: [60, 35],\n              iconAnchor: [30, 17]\n            });\n            window.L.marker([location.lat, location.lng], {\n              icon: stationIcon\n            }).addTo(map).bindPopup(`<div style=\"text-align: center;\"><strong>${location.name}</strong><br/>AQI: ${Math.round(aqi)}</div>`);\n          });\n        }\n        mapRef.current = map;\n        console.log('‚úÖ Lazy map initialized');\n      } catch (error) {\n        console.error('‚ùå Lazy map initialization failed:', error);\n      }\n    };\n\n    // Initialize map with a small delay to ensure DOM is ready\n    setTimeout(initMap, 100);\n    return () => {\n      if (mapRef.current) {\n        try {\n          mapRef.current.remove();\n        } catch (e) {}\n        mapRef.current = null;\n      }\n    };\n  }, [userLocation, dashboardData, currentAQI]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      height: '300px',\n      width: '100%',\n      borderRadius: '12px',\n      background: '#f8fafc'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(LazyMap, \"4wnSo2BWjuiqTl0e7W6pwswyqtg=\");\n_c = LazyMap;\nexport default LazyMap;\nvar _c;\n$RefreshReg$(_c, \"LazyMap\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","LazyMap","userLocation","dashboardData","currentAQI","_s","mapRef","containerRef","window","L","initMap","current","remove","map","center","lat","lng","zoom","zoomControl","attributionControl","tileLayer","maxZoom","addTo","userIcon","divIcon","html","iconSize","iconAnchor","marker","icon","bindPopup","openPopup","sensor_locations","Object","entries","forEach","id","location","_dashboardData$all_st","_dashboardData$all_st2","aqi","all_stations_data","highest_sub_index","stationIcon","Math","round","name","console","log","error","setTimeout","e","ref","style","height","width","borderRadius","background","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/arathy/React_django/my-django-react-app/frontend/src/components/LazyMap.js"],"sourcesContent":["// components/LazyMap.js\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\nconst LazyMap = ({ userLocation, dashboardData, currentAQI }) => {\r\n  const mapRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // Only initialize if Leaflet is available\r\n    if (!window.L || !userLocation) {\r\n      return;\r\n    }\r\n\r\n    const initMap = () => {\r\n      try {\r\n        // Clean up existing map\r\n        if (mapRef.current) {\r\n          mapRef.current.remove();\r\n          mapRef.current = null;\r\n        }\r\n\r\n        // Create map\r\n        const map = window.L.map(containerRef.current, {\r\n          center: [userLocation.lat, userLocation.lng],\r\n          zoom: 13,\r\n          zoomControl: true,\r\n          attributionControl: false\r\n        });\r\n\r\n        // Add tile layer\r\n        window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n          maxZoom: 18\r\n        }).addTo(map);\r\n\r\n        // Add user marker\r\n        const userIcon = window.L.divIcon({\r\n          html: `<div style=\"background: #3b82f6; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);\">üìç</div>`,\r\n          iconSize: [30, 30],\r\n          iconAnchor: [15, 15]\r\n        });\r\n\r\n        window.L.marker([userLocation.lat, userLocation.lng], { icon: userIcon })\r\n          .addTo(map)\r\n          .bindPopup(`<div style=\"text-align: center;\"><strong>Your Location</strong><br/>AQI: ${currentAQI}</div>`)\r\n          .openPopup();\r\n\r\n        // Add station markers\r\n        if (dashboardData?.sensor_locations) {\r\n          Object.entries(dashboardData.sensor_locations).forEach(([id, location]) => {\r\n            const aqi = dashboardData.all_stations_data?.[id]?.highest_sub_index || currentAQI;\r\n            \r\n            const stationIcon = window.L.divIcon({\r\n              html: `<div style=\"background: #10b981; color: white; border-radius: 8px; padding: 4px 8px; font-size: 11px; font-weight: bold;\">üì° ${Math.round(aqi)}</div>`,\r\n              iconSize: [60, 35],\r\n              iconAnchor: [30, 17]\r\n            });\r\n\r\n            window.L.marker([location.lat, location.lng], { icon: stationIcon })\r\n              .addTo(map)\r\n              .bindPopup(`<div style=\"text-align: center;\"><strong>${location.name}</strong><br/>AQI: ${Math.round(aqi)}</div>`);\r\n          });\r\n        }\r\n\r\n        mapRef.current = map;\r\n        console.log('‚úÖ Lazy map initialized');\r\n\r\n      } catch (error) {\r\n        console.error('‚ùå Lazy map initialization failed:', error);\r\n      }\r\n    };\r\n\r\n    // Initialize map with a small delay to ensure DOM is ready\r\n    setTimeout(initMap, 100);\r\n\r\n    return () => {\r\n      if (mapRef.current) {\r\n        try {\r\n          mapRef.current.remove();\r\n        } catch (e) {}\r\n        mapRef.current = null;\r\n      }\r\n    };\r\n  }, [userLocation, dashboardData, currentAQI]);\r\n\r\n  return (\r\n    <div \r\n      ref={containerRef}\r\n      style={{ \r\n        height: '300px', \r\n        width: '100%',\r\n        borderRadius: '12px',\r\n        background: '#f8fafc'\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default LazyMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}