{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import'./css/AdminLogin.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminLogin(){const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();const[searchParams]=useSearchParams();const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:8000';// Check if user wants to logout first\nuseEffect(()=>{const forceLogout=searchParams.get('logout');if(forceLogout==='true'){localStorage.removeItem('admin_user');// Remove the logout parameter from URL\nnavigate('/admin/login',{replace:true});return;}// Redirect if already logged in (unless forcing logout)\nconst adminUser=localStorage.getItem('admin_user');if(adminUser){navigate('/admin/dashboard');}},[navigate,searchParams]);const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{const response=await fetch(`${API_BASE_URL}/api/admin/login/`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});const data=await response.json();if(!response.ok){throw new Error(data.error||'Login failed.');}// Store admin user info in localStorage and redirect on success\nlocalStorage.setItem('admin_user',JSON.stringify({name:data.username}));navigate('/admin/dashboard');}catch(err){setError(err.message);}finally{setLoading(false);}};const handleForceLogin=()=>{localStorage.removeItem('admin_user');setError('');};const isAlreadyLoggedIn=localStorage.getItem('admin_user');return/*#__PURE__*/_jsx(\"div\",{className:\"admin-login-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Portal\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter your credentials to access the dashboard\"}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"\\uD83C\\uDFE0 Home\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-icon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shield-alt\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-body\",children:[isAlreadyLoggedIn&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-message\",style:{marginBottom:'20px',padding:'10px',backgroundColor:'#e3f2fd',border:'1px solid #2196f3',borderRadius:'4px'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle\"}),\"You're already logged in as admin.\",/*#__PURE__*/_jsx(\"button\",{onClick:handleForceLogin,style:{marginLeft:'10px',padding:'5px 10px',backgroundColor:'#f44336',color:'white',border:'none',borderRadius:'3px',cursor:'pointer'},children:\"Login as Different Admin\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle\"}),error]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user input-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:e=>setUsername(e.target.value),placeholder:\"Enter your username\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock input-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Enter your password\",required:true})]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"login-button\",disabled:loading,children:[loading?'Signing In...':'Sign In',!loading&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-right\",style:{marginLeft:'10px'}})]})]})]})]})});}export default AdminLogin;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}