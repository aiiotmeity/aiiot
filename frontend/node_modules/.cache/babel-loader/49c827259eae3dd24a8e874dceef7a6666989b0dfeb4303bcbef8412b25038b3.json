{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arathy\\\\React_django\\\\my-django-react-app\\\\frontend\\\\src\\\\components\\\\MapPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Line } from 'react-chartjs-2';\nimport { useAuth } from '../App';\nimport './css/MapPage.css';\n\n// Helper function to get AQI color\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getAQIColor = aqi => {\n  if (aqi === null || aqi === undefined) return '#6b7280';\n  if (aqi <= 50) return '#10b981';\n  if (aqi <= 100) return '#f59e0b';\n  if (aqi <= 150) return '#ef4444';\n  if (aqi <= 200) return '#dc2626';\n  if (aqi <= 300) return '#7c2d12';\n  return '#4c1d95';\n};\n\n// Helper function to get AQI status\nconst getAQIStatus = aqi => {\n  if (aqi === null || aqi === undefined) return 'Unknown';\n  if (aqi <= 50) return 'Good';\n  if (aqi <= 100) return 'Moderate';\n  if (aqi <= 150) return 'Unhealthy for Sensitive Groups';\n  if (aqi <= 200) return 'Unhealthy';\n  if (aqi <= 300) return 'Very Unhealthy';\n  return 'Hazardous';\n};\n\n// Main Component\nconst MapPage = () => {\n  _s();\n  var _selectedStationData$;\n  const [map, setMap] = useState(null);\n  const [stations, setStations] = useState({});\n  const [selectedStationId, setSelectedStationId] = useState('lora-v1');\n  const [forecastData, setForecastData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isForecastLoading, setIsForecastLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [selectedParameter, setSelectedParameter] = useState('pm25');\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [isPanelOpen, setIsPanelOpen] = useState(true);\n  const mapRef = useRef(null);\n  const markersRef = useRef({});\n  const navigate = useNavigate();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n  // Memoized chart options for better performance\n  const chartOptions = useMemo(() => ({\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: false\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          color: '#94a3b8',\n          font: {\n            size: 12\n          }\n        },\n        grid: {\n          color: '#334155'\n        }\n      },\n      x: {\n        ticks: {\n          color: '#94a3b8',\n          font: {\n            size: 12\n          }\n        },\n        grid: {\n          color: '#334155'\n        }\n      }\n    },\n    elements: {\n      point: {\n        radius: 4,\n        hoverRadius: 6\n      }\n    }\n  }), []);\n\n  // Memoized chart data\n  const chartData = useMemo(() => ({\n    labels: (forecastData === null || forecastData === void 0 ? void 0 : forecastData.map(d => d.day)) || [],\n    datasets: [{\n      label: `${selectedParameter.toUpperCase()} Forecast`,\n      data: (forecastData === null || forecastData === void 0 ? void 0 : forecastData.map(d => d[`${selectedParameter}_max`])) || [],\n      borderColor: '#3b82f6',\n      backgroundColor: 'rgba(59, 130, 246, 0.1)',\n      tension: 0.4,\n      fill: true\n    }]\n  }), [forecastData, selectedParameter]);\n\n  // Navigation handlers\n  const toggleMenu = useCallback(() => setIsMenuOpen(prev => !prev), []);\n  const handleLogout = useCallback(() => {\n    logout();\n    navigate('/');\n  }, [logout, navigate]);\n\n  // Effect 1: Load Leaflet and initialize map (runs once)\n  useEffect(() => {\n    let isMounted = true;\n    const initialize = async () => {\n      try {\n        if (!window.L) {\n          // Load Leaflet CSS\n          const link = document.createElement('link');\n          link.rel = \"stylesheet\";\n          link.href = \"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\";\n          document.head.appendChild(link);\n\n          // Load Leaflet JS\n          const script = document.createElement('script');\n          script.src = \"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js\";\n          script.async = true;\n          document.head.appendChild(script);\n          await new Promise((resolve, reject) => {\n            script.onload = resolve;\n            script.onerror = reject;\n          });\n        }\n        if (isMounted && mapRef.current && !mapRef.current._leaflet_id) {\n          const mapInstance = window.L.map(mapRef.current, {\n            zoomControl: false,\n            attributionControl: false\n          }).setView([10.176, 76.430], 15);\n\n          // Add zoom control to top-right\n          window.L.control.zoom({\n            position: 'topright'\n          }).addTo(mapInstance);\n\n          // Use original OpenStreetMap tiles (no dark filter)\n          window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            attribution: 'Â© OpenStreetMap contributors',\n            maxZoom: 19\n          }).addTo(mapInstance);\n          setMap(mapInstance);\n        }\n      } catch (err) {\n        if (isMounted) setError(\"Failed to load map library.\");\n      }\n    };\n    initialize();\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  // Effect 2: Fetch real-time data\n  useEffect(() => {\n    if (!map) return;\n    let isMounted = true;\n    const fetchRealtimeData = async () => {\n      setIsLoading(true);\n      setError(null);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/map/realtime/`);\n        if (!response.ok) throw new Error(`Server error: ${response.status}`);\n        const data = await response.json();\n        if (isMounted) {\n          setStations(data.stations);\n          // Set first station as default if none selected\n          if (!selectedStationId && Object.keys(data.stations).length > 0) {\n            setSelectedStationId(Object.keys(data.stations)[0]);\n          }\n        }\n      } catch (err) {\n        if (isMounted) setError(err.message);\n      } finally {\n        if (isMounted) setIsLoading(false);\n      }\n    };\n    fetchRealtimeData();\n\n    // Refresh data every 30 seconds\n    const interval = setInterval(fetchRealtimeData, 30000);\n    return () => {\n      clearInterval(interval);\n      isMounted = false;\n    };\n  }, [map, API_BASE_URL, selectedStationId]);\n\n  // Effect 3: Fetch forecast data\n  useEffect(() => {\n    if (!selectedStationId) return;\n    let isMounted = true;\n    const fetchForecastData = async () => {\n      setIsForecastLoading(true);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/station/${selectedStationId}/forecast/`);\n        if (!response.ok) throw new Error(`Forecast server error: ${response.status}`);\n        const data = await response.json();\n        if (isMounted) setForecastData(data.forecast_data);\n      } catch (err) {\n        console.error(\"Forecast fetch error:\", err);\n        if (isMounted) setForecastData([]);\n      } finally {\n        if (isMounted) setIsForecastLoading(false);\n      }\n    };\n    fetchForecastData();\n    return () => {\n      isMounted = false;\n    };\n  }, [selectedStationId, API_BASE_URL]);\n\n  // Effect 4: Update map markers\n  useEffect(() => {\n    if (!map || Object.keys(stations).length === 0) return;\n    Object.entries(stations).forEach(([id, station]) => {\n      const {\n        lat,\n        lng,\n        name\n      } = station.station_info;\n      const aqi = station.highest_sub_index;\n      const status = getAQIStatus(aqi);\n      const popupContent = `\n        <div style=\"font-family: Inter, sans-serif; min-width: 200px;\">\n          <h3 style=\"margin: 0 0 8px 0; color: #1e293b; font-size: 16px;\">${name}</h3>\n          <div style=\"display: flex; align-items: center; gap: 8px; margin-bottom: 8px;\">\n            <span style=\"font-size: 24px; font-weight: bold; color: ${getAQIColor(aqi)};\">\n              ${aqi ? Math.round(aqi) : 'N/A'}\n            </span>\n            <span style=\"color: #64748b; font-size: 14px;\">AQI</span>\n          </div>\n          <div style=\"color: #475569; font-size: 12px; margin-bottom: 8px;\">${status}</div>\n          <button onclick=\"window.selectStation('${id}')\" \n                  style=\"background: #3b82f6; color: white; border: none; padding: 6px 12px; \n                         border-radius: 6px; font-size: 12px; cursor: pointer;\">\n            View Details\n          </button>\n        </div>\n      `;\n      if (markersRef.current[id]) {\n        markersRef.current[id].setLatLng([lat, lng]).setPopupContent(popupContent).setStyle({\n          fillColor: getAQIColor(aqi),\n          color: selectedStationId === id ? '#ffffff' : '#334155',\n          weight: selectedStationId === id ? 4 : 2\n        });\n      } else {\n        const marker = window.L.circleMarker([lat, lng], {\n          radius: selectedStationId === id ? 18 : 15,\n          fillColor: getAQIColor(aqi),\n          color: selectedStationId === id ? '#ffffff' : '#334155',\n          weight: selectedStationId === id ? 4 : 2,\n          opacity: 1,\n          fillOpacity: 0.8\n        }).addTo(map);\n        marker.bindPopup(popupContent).on('click', () => {\n          setSelectedStationId(id);\n          setIsPanelOpen(true);\n        });\n        markersRef.current[id] = marker;\n      }\n    });\n\n    // Global function for popup button\n    window.selectStation = stationId => {\n      setSelectedStationId(stationId);\n      setIsPanelOpen(true);\n    };\n  }, [map, stations, selectedStationId]);\n  const selectedStationData = stations[selectedStationId];\n  const pollutants = ['pm25', 'pm10', 'so2', 'no2', 'co', 'o3', 'nh3'];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"navbar\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar-content\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"navbar-brand\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/aqi.webp\",\n            alt: \"AQM Logo\",\n            loading: \"lazy\",\n            width: \"40\",\n            height: \"40\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), \"AirAware\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"menu-toggle\",\n          onClick: toggleMenu,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-bars\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: `nav-links ${isMenuOpen ? 'active' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              className: \"nav-link\",\n              children: \"Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/map\",\n              className: \"nav-link active\",\n              children: \"Live Map\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/dashboard\",\n                className: \"nav-link\",\n                children: \"Dashboard\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-link user-greeting\",\n              children: [\"Hello, \", user.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleLogout,\n                className: \"nav-link login-btn nav-button\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-sign-out-alt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 21\n                }, this), \" Logout\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/login\",\n              className: \"nav-link login-btn\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-sign-in-alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 19\n              }, this), \" Login\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"map\",\n        ref: mapRef,\n        className: \"map-element\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-controls\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `panel-toggle ${isPanelOpen ? 'active' : ''}`,\n          onClick: () => setIsPanelOpen(!isPanelOpen),\n          title: isPanelOpen ? 'Hide Panel' : 'Show Panel',\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: `fas ${isPanelOpen ? 'fa-chevron-right' : 'fa-chevron-left'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), selectedStationData && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quick-aqi-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"quick-aqi-value\",\n          style: {\n            color: getAQIColor(selectedStationData.highest_sub_index)\n          },\n          children: Math.round(selectedStationData.highest_sub_index) || 'N/A'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"quick-aqi-label\",\n          children: selectedStationData.station_info.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `details-panel ${isPanelOpen ? 'open' : ''}`,\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-exclamation-triangle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 11\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-loader\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading stations...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"panel-title\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-map-marker-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this), \"Monitoring Stations\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"station-selector\",\n            children: Object.entries(stations).map(([stationId, station]) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `station-btn ${selectedStationId === stationId ? 'active' : ''}`,\n              onClick: () => setSelectedStationId(stationId),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"station-btn-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"station-name\",\n                  children: station.station_info.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"station-aqi\",\n                  style: {\n                    color: getAQIColor(station.highest_sub_index)\n                  },\n                  children: Math.round(station.highest_sub_index) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 21\n              }, this)\n            }, stationId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-content\",\n          children: selectedStationData ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"aqi-overview-card\",\n              style: {\n                borderTopColor: getAQIColor(selectedStationData.highest_sub_index)\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"aqi-overview-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Current Air Quality\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"aqi-status-badge\",\n                  style: {\n                    backgroundColor: getAQIColor(selectedStationData.highest_sub_index)\n                  },\n                  children: getAQIStatus(selectedStationData.highest_sub_index)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"aqi-value\",\n                style: {\n                  color: getAQIColor(selectedStationData.highest_sub_index)\n                },\n                children: Math.round(selectedStationData.highest_sub_index) || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"aqi-status-text\",\n                children: \"Air Quality Index\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"last-updated\",\n                children: [\"Last updated: \", ((_selectedStationData$ = selectedStationData.latest_item) === null || _selectedStationData$ === void 0 ? void 0 : _selectedStationData$.time) || 'N/A']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"metrics-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"section-title\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-chart-bar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 23\n                }, this), \"Pollutant Levels\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"metrics-grid\",\n                children: pollutants.map(pollutant => {\n                  var _selectedStationData$2;\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"metric-card\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"metric-label\",\n                      children: pollutant.toUpperCase()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 426,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"metric-value\",\n                      children: (_selectedStationData$2 = selectedStationData.averages) !== null && _selectedStationData$2 !== void 0 && _selectedStationData$2[pollutant] ? Math.round(selectedStationData.averages[pollutant]) : '--'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 427,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"metric-unit\",\n                      children: \"\\u03BCg/m\\xB3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 433,\n                      columnNumber: 27\n                    }, this)]\n                  }, pollutant, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 425,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"forecast-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"section-title\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-chart-line\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 23\n                }, this), \"4-Day Forecast\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"parameter-controls\",\n                children: pollutants.map(param => /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `parameter-btn ${selectedParameter === param ? 'active' : ''}`,\n                  onClick: () => setSelectedParameter(param),\n                  children: param.toUpperCase()\n                }, param, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chart-container\",\n                children: isForecastLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"chart-loader\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"loading-spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 461,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Loading forecast...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 462,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 25\n                }, this) : forecastData && forecastData.length > 0 ? /*#__PURE__*/_jsxDEV(Line, {\n                  data: chartData,\n                  options: chartOptions\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 465,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"no-data-message\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-chart-line\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 468,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Forecast data not available\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-selection\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-map-marker-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Select a monitoring station to view details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 5\n  }, this);\n};\n_s(MapPage, \"CR56kY3H86bXdF7jRi4TxirBz6I=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = MapPage;\nexport default MapPage;\nvar _c;\n$RefreshReg$(_c, \"MapPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","Link","useNavigate","Line","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","getAQIColor","aqi","undefined","getAQIStatus","MapPage","_s","_selectedStationData$","map","setMap","stations","setStations","selectedStationId","setSelectedStationId","forecastData","setForecastData","isLoading","setIsLoading","isForecastLoading","setIsForecastLoading","error","setError","selectedParameter","setSelectedParameter","isMenuOpen","setIsMenuOpen","isPanelOpen","setIsPanelOpen","mapRef","markersRef","navigate","user","logout","API_BASE_URL","process","env","REACT_APP_API_URL","chartOptions","responsive","maintainAspectRatio","plugins","legend","display","scales","y","beginAtZero","ticks","color","font","size","grid","x","elements","point","radius","hoverRadius","chartData","labels","d","day","datasets","label","toUpperCase","data","borderColor","backgroundColor","tension","fill","toggleMenu","prev","handleLogout","isMounted","initialize","window","L","link","document","createElement","rel","href","head","appendChild","script","src","async","Promise","resolve","reject","onload","onerror","current","_leaflet_id","mapInstance","zoomControl","attributionControl","setView","control","zoom","position","addTo","tileLayer","attribution","maxZoom","err","fetchRealtimeData","response","fetch","ok","Error","status","json","Object","keys","length","message","interval","setInterval","clearInterval","fetchForecastData","forecast_data","console","entries","forEach","id","station","lat","lng","name","station_info","highest_sub_index","popupContent","Math","round","setLatLng","setPopupContent","setStyle","fillColor","weight","marker","circleMarker","opacity","fillOpacity","bindPopup","on","selectStation","stationId","selectedStationData","pollutants","className","children","to","alt","loading","width","height","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","title","style","borderTopColor","latest_item","time","pollutant","_selectedStationData$2","averages","param","options","_c","$RefreshReg$"],"sources":["C:/Users/arathy/React_django/my-django-react-app/frontend/src/components/MapPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Line } from 'react-chartjs-2';\r\nimport { useAuth } from '../App';\r\nimport './css/MapPage.css';\r\n\r\n// Helper function to get AQI color\r\nconst getAQIColor = (aqi) => {\r\n  if (aqi === null || aqi === undefined) return '#6b7280';\r\n  if (aqi <= 50) return '#10b981';\r\n  if (aqi <= 100) return '#f59e0b';\r\n  if (aqi <= 150) return '#ef4444';\r\n  if (aqi <= 200) return '#dc2626';\r\n  if (aqi <= 300) return '#7c2d12';\r\n  return '#4c1d95';\r\n};\r\n\r\n// Helper function to get AQI status\r\nconst getAQIStatus = (aqi) => {\r\n  if (aqi === null || aqi === undefined) return 'Unknown';\r\n  if (aqi <= 50) return 'Good';\r\n  if (aqi <= 100) return 'Moderate';\r\n  if (aqi <= 150) return 'Unhealthy for Sensitive Groups';\r\n  if (aqi <= 200) return 'Unhealthy';\r\n  if (aqi <= 300) return 'Very Unhealthy';\r\n  return 'Hazardous';\r\n};\r\n\r\n// Main Component\r\nconst MapPage = () => {\r\n  const [map, setMap] = useState(null);\r\n  const [stations, setStations] = useState({});\r\n  const [selectedStationId, setSelectedStationId] = useState('lora-v1');\r\n  const [forecastData, setForecastData] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isForecastLoading, setIsForecastLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [selectedParameter, setSelectedParameter] = useState('pm25');\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const [isPanelOpen, setIsPanelOpen] = useState(true);\r\n\r\n  const mapRef = useRef(null);\r\n  const markersRef = useRef({});\r\n  const navigate = useNavigate();\r\n  const { user, logout } = useAuth();\r\n  const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\r\n\r\n  // Memoized chart options for better performance\r\n  const chartOptions = useMemo(() => ({\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        display: false\r\n      }\r\n    },\r\n    scales: {\r\n      y: {\r\n        beginAtZero: true,\r\n        ticks: {\r\n          color: '#94a3b8',\r\n          font: {\r\n            size: 12\r\n          }\r\n        },\r\n        grid: {\r\n          color: '#334155'\r\n        }\r\n      },\r\n      x: {\r\n        ticks: {\r\n          color: '#94a3b8',\r\n          font: {\r\n            size: 12\r\n          }\r\n        },\r\n        grid: {\r\n          color: '#334155'\r\n        }\r\n      }\r\n    },\r\n    elements: {\r\n      point: {\r\n        radius: 4,\r\n        hoverRadius: 6\r\n      }\r\n    }\r\n  }), []);\r\n\r\n  // Memoized chart data\r\n  const chartData = useMemo(() => ({\r\n    labels: forecastData?.map(d => d.day) || [],\r\n    datasets: [{\r\n      label: `${selectedParameter.toUpperCase()} Forecast`,\r\n      data: forecastData?.map(d => d[`${selectedParameter}_max`]) || [],\r\n      borderColor: '#3b82f6',\r\n      backgroundColor: 'rgba(59, 130, 246, 0.1)',\r\n      tension: 0.4,\r\n      fill: true\r\n    }]\r\n  }), [forecastData, selectedParameter]);\r\n\r\n  // Navigation handlers\r\n  const toggleMenu = useCallback(() => setIsMenuOpen(prev => !prev), []);\r\n  const handleLogout = useCallback(() => {\r\n    logout();\r\n    navigate('/');\r\n  }, [logout, navigate]);\r\n\r\n  // Effect 1: Load Leaflet and initialize map (runs once)\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const initialize = async () => {\r\n      try {\r\n        if (!window.L) {\r\n          // Load Leaflet CSS\r\n          const link = document.createElement('link');\r\n          link.rel = \"stylesheet\";\r\n          link.href = \"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\";\r\n          document.head.appendChild(link);\r\n\r\n          // Load Leaflet JS\r\n          const script = document.createElement('script');\r\n          script.src = \"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js\";\r\n          script.async = true;\r\n          document.head.appendChild(script);\r\n          \r\n          await new Promise((resolve, reject) => {\r\n            script.onload = resolve;\r\n            script.onerror = reject;\r\n          });\r\n        }\r\n\r\n        if (isMounted && mapRef.current && !mapRef.current._leaflet_id) {\r\n          const mapInstance = window.L.map(mapRef.current, {\r\n            zoomControl: false,\r\n            attributionControl: false\r\n          }).setView([10.176, 76.430], 15);\r\n\r\n          // Add zoom control to top-right\r\n          window.L.control.zoom({\r\n            position: 'topright'\r\n          }).addTo(mapInstance);\r\n\r\n          // Use original OpenStreetMap tiles (no dark filter)\r\n          window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            attribution: 'Â© OpenStreetMap contributors',\r\n            maxZoom: 19\r\n          }).addTo(mapInstance);\r\n\r\n          setMap(mapInstance);\r\n        }\r\n      } catch (err) {\r\n        if (isMounted) setError(\"Failed to load map library.\");\r\n      }\r\n    };\r\n    \r\n    initialize();\r\n    return () => { isMounted = false; };\r\n  }, []);\r\n\r\n  // Effect 2: Fetch real-time data\r\n  useEffect(() => {\r\n    if (!map) return;\r\n    \r\n    let isMounted = true;\r\n    const fetchRealtimeData = async () => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/api/map/realtime/`);\r\n        if (!response.ok) throw new Error(`Server error: ${response.status}`);\r\n        const data = await response.json();\r\n        if (isMounted) {\r\n          setStations(data.stations);\r\n          // Set first station as default if none selected\r\n          if (!selectedStationId && Object.keys(data.stations).length > 0) {\r\n            setSelectedStationId(Object.keys(data.stations)[0]);\r\n          }\r\n        }\r\n      } catch (err) {\r\n        if (isMounted) setError(err.message);\r\n      } finally {\r\n        if (isMounted) setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRealtimeData();\r\n    \r\n    // Refresh data every 30 seconds\r\n    const interval = setInterval(fetchRealtimeData, 30000);\r\n    return () => {\r\n      clearInterval(interval);\r\n      isMounted = false;\r\n    };\r\n  }, [map, API_BASE_URL, selectedStationId]);\r\n\r\n  // Effect 3: Fetch forecast data\r\n  useEffect(() => {\r\n    if (!selectedStationId) return;\r\n    \r\n    let isMounted = true;\r\n    const fetchForecastData = async () => {\r\n      setIsForecastLoading(true);\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/api/station/${selectedStationId}/forecast/`);\r\n        if (!response.ok) throw new Error(`Forecast server error: ${response.status}`);\r\n        const data = await response.json();\r\n        if (isMounted) setForecastData(data.forecast_data);\r\n      } catch (err) {\r\n        console.error(\"Forecast fetch error:\", err);\r\n        if (isMounted) setForecastData([]);\r\n      } finally {\r\n        if (isMounted) setIsForecastLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchForecastData();\r\n    return () => { isMounted = false; };\r\n  }, [selectedStationId, API_BASE_URL]);\r\n\r\n  // Effect 4: Update map markers\r\n  useEffect(() => {\r\n    if (!map || Object.keys(stations).length === 0) return;\r\n\r\n    Object.entries(stations).forEach(([id, station]) => {\r\n      const { lat, lng, name } = station.station_info;\r\n      const aqi = station.highest_sub_index;\r\n      const status = getAQIStatus(aqi);\r\n      \r\n      const popupContent = `\r\n        <div style=\"font-family: Inter, sans-serif; min-width: 200px;\">\r\n          <h3 style=\"margin: 0 0 8px 0; color: #1e293b; font-size: 16px;\">${name}</h3>\r\n          <div style=\"display: flex; align-items: center; gap: 8px; margin-bottom: 8px;\">\r\n            <span style=\"font-size: 24px; font-weight: bold; color: ${getAQIColor(aqi)};\">\r\n              ${aqi ? Math.round(aqi) : 'N/A'}\r\n            </span>\r\n            <span style=\"color: #64748b; font-size: 14px;\">AQI</span>\r\n          </div>\r\n          <div style=\"color: #475569; font-size: 12px; margin-bottom: 8px;\">${status}</div>\r\n          <button onclick=\"window.selectStation('${id}')\" \r\n                  style=\"background: #3b82f6; color: white; border: none; padding: 6px 12px; \r\n                         border-radius: 6px; font-size: 12px; cursor: pointer;\">\r\n            View Details\r\n          </button>\r\n        </div>\r\n      `;\r\n\r\n      if (markersRef.current[id]) {\r\n        markersRef.current[id]\r\n          .setLatLng([lat, lng])\r\n          .setPopupContent(popupContent)\r\n          .setStyle({ \r\n            fillColor: getAQIColor(aqi),\r\n            color: selectedStationId === id ? '#ffffff' : '#334155',\r\n            weight: selectedStationId === id ? 4 : 2\r\n          });\r\n      } else {\r\n        const marker = window.L.circleMarker([lat, lng], {\r\n          radius: selectedStationId === id ? 18 : 15,\r\n          fillColor: getAQIColor(aqi),\r\n          color: selectedStationId === id ? '#ffffff' : '#334155',\r\n          weight: selectedStationId === id ? 4 : 2,\r\n          opacity: 1,\r\n          fillOpacity: 0.8\r\n        }).addTo(map);\r\n\r\n        marker.bindPopup(popupContent).on('click', () => {\r\n          setSelectedStationId(id);\r\n          setIsPanelOpen(true);\r\n        });\r\n\r\n        markersRef.current[id] = marker;\r\n      }\r\n    });\r\n\r\n    // Global function for popup button\r\n    window.selectStation = (stationId) => {\r\n      setSelectedStationId(stationId);\r\n      setIsPanelOpen(true);\r\n    };\r\n\r\n  }, [map, stations, selectedStationId]);\r\n\r\n  const selectedStationData = stations[selectedStationId];\r\n  const pollutants = ['pm25', 'pm10', 'so2', 'no2', 'co', 'o3', 'nh3'];\r\n\r\n  return (\r\n    <div className=\"map-page\">\r\n      {/* Navbar */}\r\n      <nav className=\"navbar\">\r\n        <div className=\"navbar-content\">\r\n          <Link to=\"/\" className=\"navbar-brand\">\r\n            <img src=\"/aqi.webp\" alt=\"AQM Logo\" loading=\"lazy\" width=\"40\" height=\"40\" />\r\n            AirAware\r\n          </Link>\r\n          <div className=\"menu-toggle\" onClick={toggleMenu}>\r\n            <i className=\"fas fa-bars\"></i>\r\n          </div>\r\n          <ul className={`nav-links ${isMenuOpen ? 'active' : ''}`}>\r\n            <li><Link to=\"/\" className=\"nav-link\">Home</Link></li>\r\n            <li><Link to=\"/map\" className=\"nav-link active\">Live Map</Link></li>\r\n            {user ? (\r\n              <>\r\n                <li><Link to=\"/dashboard\" className=\"nav-link\">Dashboard</Link></li>\r\n                <li className=\"nav-link user-greeting\">Hello, {user.name}</li>\r\n                <li>\r\n                  <button onClick={handleLogout} className=\"nav-link login-btn nav-button\">\r\n                    <i className=\"fas fa-sign-out-alt\"></i> Logout\r\n                  </button>\r\n                </li>\r\n              </>\r\n            ) : (\r\n              <li>\r\n                <Link to=\"/login\" className=\"nav-link login-btn\">\r\n                  <i className=\"fas fa-sign-in-alt\"></i> Login\r\n                </Link>\r\n              </li>\r\n            )}\r\n          </ul>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Map Container */}\r\n      <div className=\"map-container\">\r\n        <div id=\"map\" ref={mapRef} className=\"map-element\"></div>\r\n        \r\n        {/* Map Controls */}\r\n        <div className=\"map-controls\">\r\n          <button \r\n            className={`panel-toggle ${isPanelOpen ? 'active' : ''}`}\r\n            onClick={() => setIsPanelOpen(!isPanelOpen)}\r\n            title={isPanelOpen ? 'Hide Panel' : 'Show Panel'}\r\n          >\r\n            <i className={`fas ${isPanelOpen ? 'fa-chevron-right' : 'fa-chevron-left'}`}></i>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Quick AQI Summary */}\r\n        {selectedStationData && (\r\n          <div className=\"quick-aqi-summary\">\r\n            <div className=\"quick-aqi-value\" style={{ color: getAQIColor(selectedStationData.highest_sub_index) }}>\r\n              {Math.round(selectedStationData.highest_sub_index) || 'N/A'}\r\n            </div>\r\n            <div className=\"quick-aqi-label\">\r\n              {selectedStationData.station_info.name}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Details Panel */}\r\n      <div className={`details-panel ${isPanelOpen ? 'open' : ''}`}>\r\n        {error && (\r\n          <div className=\"error-message\">\r\n            <i className=\"fas fa-exclamation-triangle\"></i>\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        {isLoading ? (\r\n          <div className=\"panel-loader\">\r\n            <div className=\"loading-spinner\"></div>\r\n            <p>Loading stations...</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"panel-header\">\r\n              <h2 className=\"panel-title\">\r\n                <i className=\"fas fa-map-marker-alt\"></i>\r\n                Monitoring Stations\r\n              </h2>\r\n              <div className=\"station-selector\">\r\n                {Object.entries(stations).map(([stationId, station]) => (\r\n                  <button \r\n                    key={stationId} \r\n                    className={`station-btn ${selectedStationId === stationId ? 'active' : ''}`} \r\n                    onClick={() => setSelectedStationId(stationId)}\r\n                  >\r\n                    <div className=\"station-btn-content\">\r\n                      <span className=\"station-name\">{station.station_info.name}</span>\r\n                      <span \r\n                        className=\"station-aqi\"\r\n                        style={{ color: getAQIColor(station.highest_sub_index) }}\r\n                      >\r\n                        {Math.round(station.highest_sub_index) || 'N/A'}\r\n                      </span>\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"panel-content\">\r\n              {selectedStationData ? (\r\n                <>\r\n                  {/* AQI Overview */}\r\n                  <div className=\"aqi-overview-card\" style={{ borderTopColor: getAQIColor(selectedStationData.highest_sub_index) }}>\r\n                    <div className=\"aqi-overview-header\">\r\n                      <h3>Current Air Quality</h3>\r\n                      <span \r\n                        className=\"aqi-status-badge\"\r\n                        style={{ backgroundColor: getAQIColor(selectedStationData.highest_sub_index) }}\r\n                      >\r\n                        {getAQIStatus(selectedStationData.highest_sub_index)}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"aqi-value\" style={{ color: getAQIColor(selectedStationData.highest_sub_index) }}>\r\n                      {Math.round(selectedStationData.highest_sub_index) || 'N/A'}\r\n                    </div>\r\n                    <div className=\"aqi-status-text\">Air Quality Index</div>\r\n                    <div className=\"last-updated\">\r\n                      Last updated: {selectedStationData.latest_item?.time || 'N/A'}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Pollutant Metrics */}\r\n                  <div className=\"metrics-section\">\r\n                    <h3 className=\"section-title\">\r\n                      <i className=\"fas fa-chart-bar\"></i>\r\n                      Pollutant Levels\r\n                    </h3>\r\n                    <div className=\"metrics-grid\">\r\n                      {pollutants.map(pollutant => (\r\n                        <div key={pollutant} className=\"metric-card\">\r\n                          <div className=\"metric-label\">{pollutant.toUpperCase()}</div>\r\n                          <div className=\"metric-value\">\r\n                            {selectedStationData.averages?.[pollutant] \r\n                              ? Math.round(selectedStationData.averages[pollutant]) \r\n                              : '--'\r\n                            }\r\n                          </div>\r\n                          <div className=\"metric-unit\">Î¼g/mÂ³</div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Forecast Section */}\r\n                  <div className=\"forecast-section\">\r\n                    <h3 className=\"section-title\">\r\n                      <i className=\"fas fa-chart-line\"></i>\r\n                      4-Day Forecast\r\n                    </h3>\r\n                    \r\n                    <div className=\"parameter-controls\">\r\n                      {pollutants.map(param => (\r\n                        <button \r\n                          key={param} \r\n                          className={`parameter-btn ${selectedParameter === param ? 'active' : ''}`} \r\n                          onClick={() => setSelectedParameter(param)}\r\n                        >\r\n                          {param.toUpperCase()}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n\r\n                    <div className=\"chart-container\">\r\n                      {isForecastLoading ? (\r\n                        <div className=\"chart-loader\">\r\n                          <div className=\"loading-spinner\"></div>\r\n                          <p>Loading forecast...</p>\r\n                        </div>\r\n                      ) : forecastData && forecastData.length > 0 ? (\r\n                        <Line data={chartData} options={chartOptions} />\r\n                      ) : (\r\n                        <div className=\"no-data-message\">\r\n                          <i className=\"fas fa-chart-line\"></i>\r\n                          <p>Forecast data not available</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <div className=\"no-selection\">\r\n                  <i className=\"fas fa-map-marker-alt\"></i>\r\n                  <p>Select a monitoring station to view details</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapPage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,EAAEC,OAAO,QAAQ,OAAO;AAChF,SAASC,IAAI,EAAEC,WAAW,QAAQ,kBAAkB;AACpD,SAASC,IAAI,QAAQ,iBAAiB;AACtC,SAASC,OAAO,QAAQ,QAAQ;AAChC,OAAO,mBAAmB;;AAE1B;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,WAAW,GAAIC,GAAG,IAAK;EAC3B,IAAIA,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAKC,SAAS,EAAE,OAAO,SAAS;EACvD,IAAID,GAAG,IAAI,EAAE,EAAE,OAAO,SAAS;EAC/B,IAAIA,GAAG,IAAI,GAAG,EAAE,OAAO,SAAS;EAChC,IAAIA,GAAG,IAAI,GAAG,EAAE,OAAO,SAAS;EAChC,IAAIA,GAAG,IAAI,GAAG,EAAE,OAAO,SAAS;EAChC,IAAIA,GAAG,IAAI,GAAG,EAAE,OAAO,SAAS;EAChC,OAAO,SAAS;AAClB,CAAC;;AAED;AACA,MAAME,YAAY,GAAIF,GAAG,IAAK;EAC5B,IAAIA,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAKC,SAAS,EAAE,OAAO,SAAS;EACvD,IAAID,GAAG,IAAI,EAAE,EAAE,OAAO,MAAM;EAC5B,IAAIA,GAAG,IAAI,GAAG,EAAE,OAAO,UAAU;EACjC,IAAIA,GAAG,IAAI,GAAG,EAAE,OAAO,gCAAgC;EACvD,IAAIA,GAAG,IAAI,GAAG,EAAE,OAAO,WAAW;EAClC,IAAIA,GAAG,IAAI,GAAG,EAAE,OAAO,gBAAgB;EACvC,OAAO,WAAW;AACpB,CAAC;;AAED;AACA,MAAMG,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,qBAAA;EACpB,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAM,CAACsB,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC5C,MAAM,CAACwB,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGzB,QAAQ,CAAC,SAAS,CAAC;EACrE,MAAM,CAAC0B,YAAY,EAAEC,eAAe,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAAC4B,SAAS,EAAEC,YAAY,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAAC8B,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG/B,QAAQ,CAAC,KAAK,CAAC;EACjE,MAAM,CAACgC,KAAK,EAAEC,QAAQ,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACkC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGnC,QAAQ,CAAC,MAAM,CAAC;EAClE,MAAM,CAACoC,UAAU,EAAEC,aAAa,CAAC,GAAGrC,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACsC,WAAW,EAAEC,cAAc,CAAC,GAAGvC,QAAQ,CAAC,IAAI,CAAC;EAEpD,MAAMwC,MAAM,GAAGtC,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAMuC,UAAU,GAAGvC,MAAM,CAAC,CAAC,CAAC,CAAC;EAC7B,MAAMwC,QAAQ,GAAGpC,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEqC,IAAI;IAAEC;EAAO,CAAC,GAAGpC,OAAO,CAAC,CAAC;EAClC,MAAMqC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;;EAE7E;EACA,MAAMC,YAAY,GAAG7C,OAAO,CAAC,OAAO;IAClC8C,UAAU,EAAE,IAAI;IAChBC,mBAAmB,EAAE,KAAK;IAC1BC,OAAO,EAAE;MACPC,MAAM,EAAE;QACNC,OAAO,EAAE;MACX;IACF,CAAC;IACDC,MAAM,EAAE;MACNC,CAAC,EAAE;QACDC,WAAW,EAAE,IAAI;QACjBC,KAAK,EAAE;UACLC,KAAK,EAAE,SAAS;UAChBC,IAAI,EAAE;YACJC,IAAI,EAAE;UACR;QACF,CAAC;QACDC,IAAI,EAAE;UACJH,KAAK,EAAE;QACT;MACF,CAAC;MACDI,CAAC,EAAE;QACDL,KAAK,EAAE;UACLC,KAAK,EAAE,SAAS;UAChBC,IAAI,EAAE;YACJC,IAAI,EAAE;UACR;QACF,CAAC;QACDC,IAAI,EAAE;UACJH,KAAK,EAAE;QACT;MACF;IACF,CAAC;IACDK,QAAQ,EAAE;MACRC,KAAK,EAAE;QACLC,MAAM,EAAE,CAAC;QACTC,WAAW,EAAE;MACf;IACF;EACF,CAAC,CAAC,EAAE,EAAE,CAAC;;EAEP;EACA,MAAMC,SAAS,GAAGhE,OAAO,CAAC,OAAO;IAC/BiE,MAAM,EAAE,CAAA3C,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEN,GAAG,CAACkD,CAAC,IAAIA,CAAC,CAACC,GAAG,CAAC,KAAI,EAAE;IAC3CC,QAAQ,EAAE,CAAC;MACTC,KAAK,EAAE,GAAGvC,iBAAiB,CAACwC,WAAW,CAAC,CAAC,WAAW;MACpDC,IAAI,EAAE,CAAAjD,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEN,GAAG,CAACkD,CAAC,IAAIA,CAAC,CAAC,GAAGpC,iBAAiB,MAAM,CAAC,CAAC,KAAI,EAAE;MACjE0C,WAAW,EAAE,SAAS;MACtBC,eAAe,EAAE,yBAAyB;MAC1CC,OAAO,EAAE,GAAG;MACZC,IAAI,EAAE;IACR,CAAC;EACH,CAAC,CAAC,EAAE,CAACrD,YAAY,EAAEQ,iBAAiB,CAAC,CAAC;;EAEtC;EACA,MAAM8C,UAAU,GAAG7E,WAAW,CAAC,MAAMkC,aAAa,CAAC4C,IAAI,IAAI,CAACA,IAAI,CAAC,EAAE,EAAE,CAAC;EACtE,MAAMC,YAAY,GAAG/E,WAAW,CAAC,MAAM;IACrCyC,MAAM,CAAC,CAAC;IACRF,QAAQ,CAAC,GAAG,CAAC;EACf,CAAC,EAAE,CAACE,MAAM,EAAEF,QAAQ,CAAC,CAAC;;EAEtB;EACAzC,SAAS,CAAC,MAAM;IACd,IAAIkF,SAAS,GAAG,IAAI;IACpB,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,IAAI,CAACC,MAAM,CAACC,CAAC,EAAE;UACb;UACA,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;UAC3CF,IAAI,CAACG,GAAG,GAAG,YAAY;UACvBH,IAAI,CAACI,IAAI,GAAG,kDAAkD;UAC9DH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC;;UAE/B;UACA,MAAMO,MAAM,GAAGN,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;UAC/CK,MAAM,CAACC,GAAG,GAAG,iDAAiD;UAC9DD,MAAM,CAACE,KAAK,GAAG,IAAI;UACnBR,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACC,MAAM,CAAC;UAEjC,MAAM,IAAIG,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;YACrCL,MAAM,CAACM,MAAM,GAAGF,OAAO;YACvBJ,MAAM,CAACO,OAAO,GAAGF,MAAM;UACzB,CAAC,CAAC;QACJ;QAEA,IAAIhB,SAAS,IAAI3C,MAAM,CAAC8D,OAAO,IAAI,CAAC9D,MAAM,CAAC8D,OAAO,CAACC,WAAW,EAAE;UAC9D,MAAMC,WAAW,GAAGnB,MAAM,CAACC,CAAC,CAAClE,GAAG,CAACoB,MAAM,CAAC8D,OAAO,EAAE;YAC/CG,WAAW,EAAE,KAAK;YAClBC,kBAAkB,EAAE;UACtB,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC;;UAEhC;UACAtB,MAAM,CAACC,CAAC,CAACsB,OAAO,CAACC,IAAI,CAAC;YACpBC,QAAQ,EAAE;UACZ,CAAC,CAAC,CAACC,KAAK,CAACP,WAAW,CAAC;;UAErB;UACAnB,MAAM,CAACC,CAAC,CAAC0B,SAAS,CAAC,oDAAoD,EAAE;YACvEC,WAAW,EAAE,8BAA8B;YAC3CC,OAAO,EAAE;UACX,CAAC,CAAC,CAACH,KAAK,CAACP,WAAW,CAAC;UAErBnF,MAAM,CAACmF,WAAW,CAAC;QACrB;MACF,CAAC,CAAC,OAAOW,GAAG,EAAE;QACZ,IAAIhC,SAAS,EAAElD,QAAQ,CAAC,6BAA6B,CAAC;MACxD;IACF,CAAC;IAEDmD,UAAU,CAAC,CAAC;IACZ,OAAO,MAAM;MAAED,SAAS,GAAG,KAAK;IAAE,CAAC;EACrC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAlF,SAAS,CAAC,MAAM;IACd,IAAI,CAACmB,GAAG,EAAE;IAEV,IAAI+D,SAAS,GAAG,IAAI;IACpB,MAAMiC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MACpCvF,YAAY,CAAC,IAAI,CAAC;MAClBI,QAAQ,CAAC,IAAI,CAAC;MACd,IAAI;QACF,MAAMoF,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGzE,YAAY,oBAAoB,CAAC;QACjE,IAAI,CAACwE,QAAQ,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,iBAAiBH,QAAQ,CAACI,MAAM,EAAE,CAAC;QACrE,MAAM9C,IAAI,GAAG,MAAM0C,QAAQ,CAACK,IAAI,CAAC,CAAC;QAClC,IAAIvC,SAAS,EAAE;UACb5D,WAAW,CAACoD,IAAI,CAACrD,QAAQ,CAAC;UAC1B;UACA,IAAI,CAACE,iBAAiB,IAAImG,MAAM,CAACC,IAAI,CAACjD,IAAI,CAACrD,QAAQ,CAAC,CAACuG,MAAM,GAAG,CAAC,EAAE;YAC/DpG,oBAAoB,CAACkG,MAAM,CAACC,IAAI,CAACjD,IAAI,CAACrD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;UACrD;QACF;MACF,CAAC,CAAC,OAAO6F,GAAG,EAAE;QACZ,IAAIhC,SAAS,EAAElD,QAAQ,CAACkF,GAAG,CAACW,OAAO,CAAC;MACtC,CAAC,SAAS;QACR,IAAI3C,SAAS,EAAEtD,YAAY,CAAC,KAAK,CAAC;MACpC;IACF,CAAC;IAEDuF,iBAAiB,CAAC,CAAC;;IAEnB;IACA,MAAMW,QAAQ,GAAGC,WAAW,CAACZ,iBAAiB,EAAE,KAAK,CAAC;IACtD,OAAO,MAAM;MACXa,aAAa,CAACF,QAAQ,CAAC;MACvB5C,SAAS,GAAG,KAAK;IACnB,CAAC;EACH,CAAC,EAAE,CAAC/D,GAAG,EAAEyB,YAAY,EAAErB,iBAAiB,CAAC,CAAC;;EAE1C;EACAvB,SAAS,CAAC,MAAM;IACd,IAAI,CAACuB,iBAAiB,EAAE;IAExB,IAAI2D,SAAS,GAAG,IAAI;IACpB,MAAM+C,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MACpCnG,oBAAoB,CAAC,IAAI,CAAC;MAC1B,IAAI;QACF,MAAMsF,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGzE,YAAY,gBAAgBrB,iBAAiB,YAAY,CAAC;QAC1F,IAAI,CAAC6F,QAAQ,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,0BAA0BH,QAAQ,CAACI,MAAM,EAAE,CAAC;QAC9E,MAAM9C,IAAI,GAAG,MAAM0C,QAAQ,CAACK,IAAI,CAAC,CAAC;QAClC,IAAIvC,SAAS,EAAExD,eAAe,CAACgD,IAAI,CAACwD,aAAa,CAAC;MACpD,CAAC,CAAC,OAAOhB,GAAG,EAAE;QACZiB,OAAO,CAACpG,KAAK,CAAC,uBAAuB,EAAEmF,GAAG,CAAC;QAC3C,IAAIhC,SAAS,EAAExD,eAAe,CAAC,EAAE,CAAC;MACpC,CAAC,SAAS;QACR,IAAIwD,SAAS,EAAEpD,oBAAoB,CAAC,KAAK,CAAC;MAC5C;IACF,CAAC;IAEDmG,iBAAiB,CAAC,CAAC;IACnB,OAAO,MAAM;MAAE/C,SAAS,GAAG,KAAK;IAAE,CAAC;EACrC,CAAC,EAAE,CAAC3D,iBAAiB,EAAEqB,YAAY,CAAC,CAAC;;EAErC;EACA5C,SAAS,CAAC,MAAM;IACd,IAAI,CAACmB,GAAG,IAAIuG,MAAM,CAACC,IAAI,CAACtG,QAAQ,CAAC,CAACuG,MAAM,KAAK,CAAC,EAAE;IAEhDF,MAAM,CAACU,OAAO,CAAC/G,QAAQ,CAAC,CAACgH,OAAO,CAAC,CAAC,CAACC,EAAE,EAAEC,OAAO,CAAC,KAAK;MAClD,MAAM;QAAEC,GAAG;QAAEC,GAAG;QAAEC;MAAK,CAAC,GAAGH,OAAO,CAACI,YAAY;MAC/C,MAAM9H,GAAG,GAAG0H,OAAO,CAACK,iBAAiB;MACrC,MAAMpB,MAAM,GAAGzG,YAAY,CAACF,GAAG,CAAC;MAEhC,MAAMgI,YAAY,GAAG;AAC3B;AACA,4EAA4EH,IAAI;AAChF;AACA,sEAAsE9H,WAAW,CAACC,GAAG,CAAC;AACtF,gBAAgBA,GAAG,GAAGiI,IAAI,CAACC,KAAK,CAAClI,GAAG,CAAC,GAAG,KAAK;AAC7C;AACA;AACA;AACA,8EAA8E2G,MAAM;AACpF,mDAAmDc,EAAE;AACrD;AACA;AACA;AACA;AACA;AACA,OAAO;MAED,IAAI9F,UAAU,CAAC6D,OAAO,CAACiC,EAAE,CAAC,EAAE;QAC1B9F,UAAU,CAAC6D,OAAO,CAACiC,EAAE,CAAC,CACnBU,SAAS,CAAC,CAACR,GAAG,EAAEC,GAAG,CAAC,CAAC,CACrBQ,eAAe,CAACJ,YAAY,CAAC,CAC7BK,QAAQ,CAAC;UACRC,SAAS,EAAEvI,WAAW,CAACC,GAAG,CAAC;UAC3B6C,KAAK,EAAEnC,iBAAiB,KAAK+G,EAAE,GAAG,SAAS,GAAG,SAAS;UACvDc,MAAM,EAAE7H,iBAAiB,KAAK+G,EAAE,GAAG,CAAC,GAAG;QACzC,CAAC,CAAC;MACN,CAAC,MAAM;QACL,MAAMe,MAAM,GAAGjE,MAAM,CAACC,CAAC,CAACiE,YAAY,CAAC,CAACd,GAAG,EAAEC,GAAG,CAAC,EAAE;UAC/CxE,MAAM,EAAE1C,iBAAiB,KAAK+G,EAAE,GAAG,EAAE,GAAG,EAAE;UAC1Ca,SAAS,EAAEvI,WAAW,CAACC,GAAG,CAAC;UAC3B6C,KAAK,EAAEnC,iBAAiB,KAAK+G,EAAE,GAAG,SAAS,GAAG,SAAS;UACvDc,MAAM,EAAE7H,iBAAiB,KAAK+G,EAAE,GAAG,CAAC,GAAG,CAAC;UACxCiB,OAAO,EAAE,CAAC;UACVC,WAAW,EAAE;QACf,CAAC,CAAC,CAAC1C,KAAK,CAAC3F,GAAG,CAAC;QAEbkI,MAAM,CAACI,SAAS,CAACZ,YAAY,CAAC,CAACa,EAAE,CAAC,OAAO,EAAE,MAAM;UAC/ClI,oBAAoB,CAAC8G,EAAE,CAAC;UACxBhG,cAAc,CAAC,IAAI,CAAC;QACtB,CAAC,CAAC;QAEFE,UAAU,CAAC6D,OAAO,CAACiC,EAAE,CAAC,GAAGe,MAAM;MACjC;IACF,CAAC,CAAC;;IAEF;IACAjE,MAAM,CAACuE,aAAa,GAAIC,SAAS,IAAK;MACpCpI,oBAAoB,CAACoI,SAAS,CAAC;MAC/BtH,cAAc,CAAC,IAAI,CAAC;IACtB,CAAC;EAEH,CAAC,EAAE,CAACnB,GAAG,EAAEE,QAAQ,EAAEE,iBAAiB,CAAC,CAAC;EAEtC,MAAMsI,mBAAmB,GAAGxI,QAAQ,CAACE,iBAAiB,CAAC;EACvD,MAAMuI,UAAU,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC;EAEpE,oBACErJ,OAAA;IAAKsJ,SAAS,EAAC,UAAU;IAAAC,QAAA,gBAEvBvJ,OAAA;MAAKsJ,SAAS,EAAC,QAAQ;MAAAC,QAAA,eACrBvJ,OAAA;QAAKsJ,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7BvJ,OAAA,CAACL,IAAI;UAAC6J,EAAE,EAAC,GAAG;UAACF,SAAS,EAAC,cAAc;UAAAC,QAAA,gBACnCvJ,OAAA;YAAKqF,GAAG,EAAC,WAAW;YAACoE,GAAG,EAAC,UAAU;YAACC,OAAO,EAAC,MAAM;YAACC,KAAK,EAAC,IAAI;YAACC,MAAM,EAAC;UAAI;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,YAE9E;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACPhK,OAAA;UAAKsJ,SAAS,EAAC,aAAa;UAACW,OAAO,EAAE3F,UAAW;UAAAiF,QAAA,eAC/CvJ,OAAA;YAAGsJ,SAAS,EAAC;UAAa;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5B,CAAC,eACNhK,OAAA;UAAIsJ,SAAS,EAAE,aAAa5H,UAAU,GAAG,QAAQ,GAAG,EAAE,EAAG;UAAA6H,QAAA,gBACvDvJ,OAAA;YAAAuJ,QAAA,eAAIvJ,OAAA,CAACL,IAAI;cAAC6J,EAAE,EAAC,GAAG;cAACF,SAAS,EAAC,UAAU;cAAAC,QAAA,EAAC;YAAI;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACtDhK,OAAA;YAAAuJ,QAAA,eAAIvJ,OAAA,CAACL,IAAI;cAAC6J,EAAE,EAAC,MAAM;cAACF,SAAS,EAAC,iBAAiB;cAAAC,QAAA,EAAC;YAAQ;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EACnE/H,IAAI,gBACHjC,OAAA,CAAAE,SAAA;YAAAqJ,QAAA,gBACEvJ,OAAA;cAAAuJ,QAAA,eAAIvJ,OAAA,CAACL,IAAI;gBAAC6J,EAAE,EAAC,YAAY;gBAACF,SAAS,EAAC,UAAU;gBAAAC,QAAA,EAAC;cAAS;gBAAAM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACpEhK,OAAA;cAAIsJ,SAAS,EAAC,wBAAwB;cAAAC,QAAA,GAAC,SAAO,EAACtH,IAAI,CAACgG,IAAI;YAAA;cAAA4B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAC9DhK,OAAA;cAAAuJ,QAAA,eACEvJ,OAAA;gBAAQiK,OAAO,EAAEzF,YAAa;gBAAC8E,SAAS,EAAC,+BAA+B;gBAAAC,QAAA,gBACtEvJ,OAAA;kBAAGsJ,SAAS,EAAC;gBAAqB;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,WACzC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACP,CAAC;UAAA,eACL,CAAC,gBAEHhK,OAAA;YAAAuJ,QAAA,eACEvJ,OAAA,CAACL,IAAI;cAAC6J,EAAE,EAAC,QAAQ;cAACF,SAAS,EAAC,oBAAoB;cAAAC,QAAA,gBAC9CvJ,OAAA;gBAAGsJ,SAAS,EAAC;cAAoB;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,UACxC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACL;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNhK,OAAA;MAAKsJ,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC5BvJ,OAAA;QAAK6H,EAAE,EAAC,KAAK;QAACqC,GAAG,EAAEpI,MAAO;QAACwH,SAAS,EAAC;MAAa;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAGzDhK,OAAA;QAAKsJ,SAAS,EAAC,cAAc;QAAAC,QAAA,eAC3BvJ,OAAA;UACEsJ,SAAS,EAAE,gBAAgB1H,WAAW,GAAG,QAAQ,GAAG,EAAE,EAAG;UACzDqI,OAAO,EAAEA,CAAA,KAAMpI,cAAc,CAAC,CAACD,WAAW,CAAE;UAC5CuI,KAAK,EAAEvI,WAAW,GAAG,YAAY,GAAG,YAAa;UAAA2H,QAAA,eAEjDvJ,OAAA;YAAGsJ,SAAS,EAAE,OAAO1H,WAAW,GAAG,kBAAkB,GAAG,iBAAiB;UAAG;YAAAiI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3E;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,EAGLZ,mBAAmB,iBAClBpJ,OAAA;QAAKsJ,SAAS,EAAC,mBAAmB;QAAAC,QAAA,gBAChCvJ,OAAA;UAAKsJ,SAAS,EAAC,iBAAiB;UAACc,KAAK,EAAE;YAAEnH,KAAK,EAAE9C,WAAW,CAACiJ,mBAAmB,CAACjB,iBAAiB;UAAE,CAAE;UAAAoB,QAAA,EACnGlB,IAAI,CAACC,KAAK,CAACc,mBAAmB,CAACjB,iBAAiB,CAAC,IAAI;QAAK;UAAA0B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CAAC,eACNhK,OAAA;UAAKsJ,SAAS,EAAC,iBAAiB;UAAAC,QAAA,EAC7BH,mBAAmB,CAAClB,YAAY,CAACD;QAAI;UAAA4B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAGNhK,OAAA;MAAKsJ,SAAS,EAAE,iBAAiB1H,WAAW,GAAG,MAAM,GAAG,EAAE,EAAG;MAAA2H,QAAA,GAC1DjI,KAAK,iBACJtB,OAAA;QAAKsJ,SAAS,EAAC,eAAe;QAAAC,QAAA,gBAC5BvJ,OAAA;UAAGsJ,SAAS,EAAC;QAA6B;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAC9C1I,KAAK;MAAA;QAAAuI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,EAEA9I,SAAS,gBACRlB,OAAA;QAAKsJ,SAAS,EAAC,cAAc;QAAAC,QAAA,gBAC3BvJ,OAAA;UAAKsJ,SAAS,EAAC;QAAiB;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACvChK,OAAA;UAAAuJ,QAAA,EAAG;QAAmB;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvB,CAAC,gBAENhK,OAAA,CAAAE,SAAA;QAAAqJ,QAAA,gBACEvJ,OAAA;UAAKsJ,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BvJ,OAAA;YAAIsJ,SAAS,EAAC,aAAa;YAAAC,QAAA,gBACzBvJ,OAAA;cAAGsJ,SAAS,EAAC;YAAuB;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,uBAE3C;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACLhK,OAAA;YAAKsJ,SAAS,EAAC,kBAAkB;YAAAC,QAAA,EAC9BtC,MAAM,CAACU,OAAO,CAAC/G,QAAQ,CAAC,CAACF,GAAG,CAAC,CAAC,CAACyI,SAAS,EAAErB,OAAO,CAAC,kBACjD9H,OAAA;cAEEsJ,SAAS,EAAE,eAAexI,iBAAiB,KAAKqI,SAAS,GAAG,QAAQ,GAAG,EAAE,EAAG;cAC5Ec,OAAO,EAAEA,CAAA,KAAMlJ,oBAAoB,CAACoI,SAAS,CAAE;cAAAI,QAAA,eAE/CvJ,OAAA;gBAAKsJ,SAAS,EAAC,qBAAqB;gBAAAC,QAAA,gBAClCvJ,OAAA;kBAAMsJ,SAAS,EAAC,cAAc;kBAAAC,QAAA,EAAEzB,OAAO,CAACI,YAAY,CAACD;gBAAI;kBAAA4B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACjEhK,OAAA;kBACEsJ,SAAS,EAAC,aAAa;kBACvBc,KAAK,EAAE;oBAAEnH,KAAK,EAAE9C,WAAW,CAAC2H,OAAO,CAACK,iBAAiB;kBAAE,CAAE;kBAAAoB,QAAA,EAExDlB,IAAI,CAACC,KAAK,CAACR,OAAO,CAACK,iBAAiB,CAAC,IAAI;gBAAK;kBAAA0B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3C,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ;YAAC,GAZDb,SAAS;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAaR,CACT;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENhK,OAAA;UAAKsJ,SAAS,EAAC,eAAe;UAAAC,QAAA,EAC3BH,mBAAmB,gBAClBpJ,OAAA,CAAAE,SAAA;YAAAqJ,QAAA,gBAEEvJ,OAAA;cAAKsJ,SAAS,EAAC,mBAAmB;cAACc,KAAK,EAAE;gBAAEC,cAAc,EAAElK,WAAW,CAACiJ,mBAAmB,CAACjB,iBAAiB;cAAE,CAAE;cAAAoB,QAAA,gBAC/GvJ,OAAA;gBAAKsJ,SAAS,EAAC,qBAAqB;gBAAAC,QAAA,gBAClCvJ,OAAA;kBAAAuJ,QAAA,EAAI;gBAAmB;kBAAAM,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC5BhK,OAAA;kBACEsJ,SAAS,EAAC,kBAAkB;kBAC5Bc,KAAK,EAAE;oBAAEjG,eAAe,EAAEhE,WAAW,CAACiJ,mBAAmB,CAACjB,iBAAiB;kBAAE,CAAE;kBAAAoB,QAAA,EAE9EjJ,YAAY,CAAC8I,mBAAmB,CAACjB,iBAAiB;gBAAC;kBAAA0B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChD,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,eACNhK,OAAA;gBAAKsJ,SAAS,EAAC,WAAW;gBAACc,KAAK,EAAE;kBAAEnH,KAAK,EAAE9C,WAAW,CAACiJ,mBAAmB,CAACjB,iBAAiB;gBAAE,CAAE;gBAAAoB,QAAA,EAC7FlB,IAAI,CAACC,KAAK,CAACc,mBAAmB,CAACjB,iBAAiB,CAAC,IAAI;cAAK;gBAAA0B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxD,CAAC,eACNhK,OAAA;gBAAKsJ,SAAS,EAAC,iBAAiB;gBAAAC,QAAA,EAAC;cAAiB;gBAAAM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACxDhK,OAAA;gBAAKsJ,SAAS,EAAC,cAAc;gBAAAC,QAAA,GAAC,gBACd,EAAC,EAAA9I,qBAAA,GAAA2I,mBAAmB,CAACkB,WAAW,cAAA7J,qBAAA,uBAA/BA,qBAAA,CAAiC8J,IAAI,KAAI,KAAK;cAAA;gBAAAV,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1D,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAGNhK,OAAA;cAAKsJ,SAAS,EAAC,iBAAiB;cAAAC,QAAA,gBAC9BvJ,OAAA;gBAAIsJ,SAAS,EAAC,eAAe;gBAAAC,QAAA,gBAC3BvJ,OAAA;kBAAGsJ,SAAS,EAAC;gBAAkB;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,oBAEtC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACLhK,OAAA;gBAAKsJ,SAAS,EAAC,cAAc;gBAAAC,QAAA,EAC1BF,UAAU,CAAC3I,GAAG,CAAC8J,SAAS;kBAAA,IAAAC,sBAAA;kBAAA,oBACvBzK,OAAA;oBAAqBsJ,SAAS,EAAC,aAAa;oBAAAC,QAAA,gBAC1CvJ,OAAA;sBAAKsJ,SAAS,EAAC,cAAc;sBAAAC,QAAA,EAAEiB,SAAS,CAACxG,WAAW,CAAC;oBAAC;sBAAA6F,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eAC7DhK,OAAA;sBAAKsJ,SAAS,EAAC,cAAc;sBAAAC,QAAA,EAC1B,CAAAkB,sBAAA,GAAArB,mBAAmB,CAACsB,QAAQ,cAAAD,sBAAA,eAA5BA,sBAAA,CAA+BD,SAAS,CAAC,GACtCnC,IAAI,CAACC,KAAK,CAACc,mBAAmB,CAACsB,QAAQ,CAACF,SAAS,CAAC,CAAC,GACnD;oBAAI;sBAAAX,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAEL,CAAC,eACNhK,OAAA;sBAAKsJ,SAAS,EAAC,aAAa;sBAAAC,QAAA,EAAC;oBAAK;sBAAAM,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAK,CAAC;kBAAA,GARhCQ,SAAS;oBAAAX,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OASd,CAAC;gBAAA,CACP;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAGNhK,OAAA;cAAKsJ,SAAS,EAAC,kBAAkB;cAAAC,QAAA,gBAC/BvJ,OAAA;gBAAIsJ,SAAS,EAAC,eAAe;gBAAAC,QAAA,gBAC3BvJ,OAAA;kBAAGsJ,SAAS,EAAC;gBAAmB;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,kBAEvC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAELhK,OAAA;gBAAKsJ,SAAS,EAAC,oBAAoB;gBAAAC,QAAA,EAChCF,UAAU,CAAC3I,GAAG,CAACiK,KAAK,iBACnB3K,OAAA;kBAEEsJ,SAAS,EAAE,iBAAiB9H,iBAAiB,KAAKmJ,KAAK,GAAG,QAAQ,GAAG,EAAE,EAAG;kBAC1EV,OAAO,EAAEA,CAAA,KAAMxI,oBAAoB,CAACkJ,KAAK,CAAE;kBAAApB,QAAA,EAE1CoB,KAAK,CAAC3G,WAAW,CAAC;gBAAC,GAJf2G,KAAK;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAKJ,CACT;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eAENhK,OAAA;gBAAKsJ,SAAS,EAAC,iBAAiB;gBAAAC,QAAA,EAC7BnI,iBAAiB,gBAChBpB,OAAA;kBAAKsJ,SAAS,EAAC,cAAc;kBAAAC,QAAA,gBAC3BvJ,OAAA;oBAAKsJ,SAAS,EAAC;kBAAiB;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACvChK,OAAA;oBAAAuJ,QAAA,EAAG;kBAAmB;oBAAAM,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC,GACJhJ,YAAY,IAAIA,YAAY,CAACmG,MAAM,GAAG,CAAC,gBACzCnH,OAAA,CAACH,IAAI;kBAACoE,IAAI,EAAEP,SAAU;kBAACkH,OAAO,EAAErI;gBAAa;kBAAAsH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAEhDhK,OAAA;kBAAKsJ,SAAS,EAAC,iBAAiB;kBAAAC,QAAA,gBAC9BvJ,OAAA;oBAAGsJ,SAAS,EAAC;kBAAmB;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACrChK,OAAA;oBAAAuJ,QAAA,EAAG;kBAA2B;oBAAAM,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC/B;cACN;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA,eACN,CAAC,gBAEHhK,OAAA;YAAKsJ,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3BvJ,OAAA;cAAGsJ,SAAS,EAAC;YAAuB;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACzChK,OAAA;cAAAuJ,QAAA,EAAG;YAA2C;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/C;QACN;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA,eACN,CACH;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACxJ,EAAA,CAzcID,OAAO;EAAA,QAcMX,WAAW,EACHE,OAAO;AAAA;AAAA+K,EAAA,GAf5BtK,OAAO;AA2cb,eAAeA,OAAO;AAAC,IAAAsK,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}